var Ht=Object.defineProperty,Vt=Object.defineProperties;var Zt=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var ut=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var pt=(t,e,o)=>e in t?Ht(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,f=(t,e)=>{for(var o in e||(e={}))ut.call(e,o)&&pt(t,o,e[o]);if(Y)for(var o of Y(e))mt.call(e,o)&&pt(t,o,e[o]);return t},q=(t,e)=>Vt(t,Zt(e));var G=(t,e)=>{var o={};for(var n in t)ut.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&Y)for(var n of Y(t))e.indexOf(n)<0&&mt.call(t,n)&&(o[n]=t[n]);return o};import{c as gt,r as ht,i as ft,t as s,g as bt,a as H,b as qt,d as jt,e as O,f as Qt,h as yt,j as Jt,u as xt,k as vt,o as Kt,l as te,q as ee,s as oe,m as ne,n as re,p as se,v as ie,w as ce,x as ae,y as de,z as le,A as ue,B as p,C as j,D as i,F,E as y,R as wt,G as T,H as Et,I as Nt,J as me,K as pe,L as ge,M as N,N as he,O as fe,P as Tt,Q as V,S as be,T as ye,U as xe,V as ve,W as we,X as Ee,Y as Ne,Z as kt,_ as Te,$ as ke}from"./vendor.0947d4e0.js";const Re=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const a of c)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(c){const a={};return c.integrity&&(a.integrity=c.integrity),c.referrerpolicy&&(a.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?a.credentials="include":c.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(c){if(c.ep)return;c.ep=!0;const a=o(c);fetch(c.href,a)}};Re();const W=gt({filter(t){return!t.env},onStart(t){const e=ht(t.tree,(o,n,c)=>!!c&&ft(c,t.id));e.resume(),t.env={recorder:e}},onFinish(t,e){const o=t.env.recorder;t.env=void 0,o.stop(),e!==void 0&&o.undo()}}),Ce=s.model("UndoManagerEntry",{patches:s.frozen(),inversePatches:s.frozen()}),Ie=s.model("UndoManager",{history:s.array(Ce),undoIdx:0}).views(t=>({get undoLevels(){return t.undoIdx},get redoLevels(){return t.history.length-t.undoIdx},get canUndo(){return this.undoLevels>0},get canRedo(){return this.redoLevels>0}})).actions(t=>{let e,o=0;const n=[],c=gt({filter(r){return r.env?!1:r.context!==t},onStart(r){const d=ht(r.tree,(l,u,h)=>o?!1:!!h&&ft(h,r.id)&&l.path.startsWith(Jt(e)));d.resume(),r.env={recorder:d}},onFinish(r,d){const l=r.env.recorder;if(r.env=void 0,l.stop(),d===void 0)if(n.length>0){const u=n[n.length-1];u.patches=u.patches.concat(l.patches),u.inversePatches=u.inversePatches.concat(l.inversePatches)}else t.addUndoState(l);else l.undo()}}),a=r=>{o++;try{return r()}finally{o--}};return{addUndoState(r){this.withoutUndo(()=>{if(r.patches.length===0)return;t.history.splice(t.undoIdx),t.history.push({patches:r.patches,inversePatches:r.inversePatches});const d=bt(t).maxHistoryLength||1/0;t.history.splice(0,t.history.length-d),t.undoIdx=t.history.length})},afterCreate(){const r=H(t);if(e=bt(t).targetStore||r,e===t)throw new Error("UndoManager should be created as part of a tree, or with `targetStore` in it's environment");qt(t,jt(e,c,!1))},undo:O(W,()=>{a(()=>{if(!t.canUndo)throw new Error("undo not possible, nothing to undo");yt(H(e),t.history[t.undoIdx-1].inversePatches.slice().reverse()),t.undoIdx--})}),redo:O(W,()=>{a(()=>{if(!t.canRedo)throw new Error("redo not possible, nothing to redo");yt(H(e),t.history[t.undoIdx].patches),t.undoIdx++})}),withoutUndo(r){return a(r)},withoutUndoFlow(r){return Qt(function*(){o++;try{return yield*r()}finally{o--}})},startGroup(){if(n.length>=1)throw new Error("a previous startGroup is still running, did you forget to call stopGroup?");n.push({patches:[],inversePatches:[]})},stopGroup(){const r=n.pop();r&&this.addUndoState(r)},clear:O(W,()=>{a(()=>{t.history.clear(),t.undoIdx=0})}),clearUndo:O(W,()=>{a(()=>{t.history.splice(0,t.undoLevels),t.undoIdx=0})}),clearRedo:O(W,()=>{a(()=>{t.history.splice(t.undoIdx,t.redoLevels)})})}}),B=t=>s.optional(s.literal(t),t),Rt={fret:0,string:0},Q=s.model("Dot",{type:B("DOT"),id:s.optional(s.identifier,()=>xt()),name:s.string,transform:s.optional(s.frozen(),Rt),_fret:s.number,_string:s.number,_label:s.optional(s.string,""),_shape:s.optional(s.enumeration(["circle","square"]),"circle"),_color:s.optional(s.string,"#000"),_outline:s.optional(s.boolean,!1)}).views(t=>({get props(){return{fret:t._fret+t.transform.fret,string:t._string+t.transform.string,label:t._label,shape:t._shape,color:t._color,outline:t._outline}}})).actions(t=>({setLabel(e){t._label=e},setFret(e){t._fret=e},setString(e){t._string=e},setColor(e){t._color=e},setTransform(e){t.transform=e},commitTransform(){t._fret=t._fret+t.transform.fret,t._string=t._string+t.transform.string,t.transform=Rt}})),Ct=s.model({type:B("POINTER"),props:s.model({fret:s.number,string:s.number})}),Me=s.model({minFret:s.optional(s.number,0),maxFret:s.optional(s.number,9),showFretNumbers:s.optional(s.boolean,!0)});function w(t){return H(t)}const J=s.safeReference(Q,{acceptsUndefined:!1}),It=s.model({items:s.optional(s.array(J),[])}).actions(t=>({replace(e){t.items.replace(e)},add(e){e.forEach(o=>{t.items.includes(o)||t.items.push(o)})},toggle(e){e.forEach(o=>{t.items.includes(o)?t.items.remove(o):t.items.push(o)})},remove(e){e.forEach(o=>{t.items.remove(o)})},clear(){t.items.replace([])}})).views(t=>({get isEmpty(){return t.items.length===0},get hasItems(){return t.items.length>0},contains(e){return t.items.includes(e)}})),K=s.model("BaseInteraction",{targets:s.optional(It,{}),start:s.frozen(),current:s.frozen()}).views(t=>({get currentNote(){return w(t).board.findNearestNote(t.current.x,t.current.y)},get startNote(){return w(t).board.findNearestNote(t.start.x,t.start.y)},get hasMoved(){return t.start.x!==t.current.x||t.start.y!==t.current.y},get rect(){return new DOMRectReadOnly(Math.min(t.start.x,t.current.x),Math.min(t.start.y,t.current.y),Math.abs(t.start.x-t.current.x),Math.abs(t.start.y-t.current.y))}})),Mt=s.compose(K,s.model({type:B("MARQUEE_SELECT"),isUsingShift:s.boolean})).named("MarqueeSelectInteraction").actions(t=>{function e(){const n=w(t).document.findNodesInRect(t.rect);t.isUsingShift?t.targets.add(n):t.targets.replace(n)}return{begin(){e()},update(o){t.current=o,e(),w(t).document.selection.replace(t.targets.items)},commit(){e(),w(t).document.selection.replace(t.targets.items)}}}),St=s.compose(K,s.model({type:B("TRANSLATE")})).named("TranslateInteraction").views(t=>({get transform(){return{fret:t.currentNote.fret-t.startNote.fret,string:t.currentNote.string-t.startNote.string}},get hasMoved(){return t.currentNote.fret!==t.startNote.fret||t.currentNote.string!==t.startNote.string}})).actions(t=>({begin(e){t.targets.replace(e)},update(e){t.current=e,t.targets.items.forEach(o=>o.setTransform(t.transform))},commit(){t.targets.items.forEach(e=>e.commitTransform())}})),Ft=s.compose(K,s.model({type:B("ADD_NOTE")})).named("AddNoteInteraction").views(t=>({get transform(){return{fret:t.currentNote.fret-t.startNote.fret,string:t.currentNote.string-t.startNote.string}},get hasMoved(){return t.currentNote.fret!==t.startNote.fret||t.currentNote.string!==t.startNote.string}})).actions(t=>({begin(){const e=w(t);t.targets.replace([e.document.addDot(t.currentNote)])},update(e){t.current=e,t.targets.items.forEach(o=>o.setTransform(t.transform))},commit(){t.targets.items.forEach(o=>o.commitTransform()),w(t).document.selection.replace(t.targets.items)}})),Se=s.model({interaction:s.maybeNull(s.union(St,Mt,Ft)),initialTarget:s.maybeNull(J),hoveredNode:s.maybeNull(J),hoveredPointer:s.maybeNull(Ct),isUsingShift:s.optional(s.boolean,!1)}).actions(t=>({down(e,o){const n=w(t);tt().startGroup();const c=n.board.isPointInBoard(e.x,e.y),a=n.board.findNearestNote(e.x,e.y),r=n.document.firstNodeAtCoord(a);c?(o&&(t.isUsingShift=!0),t.hoveredPointer=null,t.hoveredNode=null,r?(t.initialTarget=r,n.document.selection.isEmpty||t.isUsingShift?n.document.selection.toggle([r]):n.document.selection.contains(r)||n.document.selection.replace([r]),t.interaction=St.create({start:e,current:e})):t.interaction=Ft.create({start:e,current:e})):(t.hoveredPointer=null,t.hoveredNode=null,t.interaction=Mt.create({start:e,current:e,isUsingShift:o!=null?o:!1})),t.interaction.begin(n.document.selection.items)},move(e){var a;const o=w(t),n=o.board.findNearestNote(e.x,e.y),c=o.board.isPointInBoard(e.x,e.y);if((a=t.interaction)==null||a.update(e),!t.interaction)if(c){const r=w(t).document.entitiesAtCoord(n);r.length>0?(t.hoveredNode=r[0],t.hoveredPointer=null):(t.hoveredNode=null,t.hoveredPointer=Ct.create({props:{fret:n.fret,string:n.string}}))}else t.hoveredPointer=null,t.hoveredNode=null},up(){var e,o;!((e=t.interaction)==null?void 0:e.hasMoved)&&!t.isUsingShift&&t.initialTarget&&w(t).document.selection.replace([t.initialTarget]),(o=t.interaction)==null||o.commit(),t.interaction=null,t.isUsingShift=!1,t.initialTarget=null,tt().stopGroup()}})),Fe=s.model("DocumentNode",{board:s.optional(Me,{}),entities:s.array(Q),selection:s.optional(It,{})}).views(t=>({entitiesAtCoord({fret:e,string:o}){return t.entities.filter(n=>n.props.fret===e&&n.props.string===o)},firstNodeAtCoord({fret:e,string:o}){return t.entities.find(n=>n.props.fret===e&&n.props.string===o)},findNodesInRect(e){return t.entities.filter(o=>{const n=w(t),{fret:c,string:a}=o.props,r=n.board.fretToX(c),d=n.board.stringToY(a);return r>=e.left&&r<=e.right&&d>=e.top&&d<=e.bottom})}})).actions(t=>({addDot({fret:e,string:o}){const n=Q.create({name:`Marker ${t.entities.length+1}`,_fret:e,_string:o});return t.entities.push(n),n},deleteEntities(e){e.forEach(o=>{t.selection.remove([o]),t.entities.remove(o)})},selectAll(){t.selection.replace(t.entities)}})),Pe=s.model({isZooming:s.optional(s.boolean,!1),zoomState:s.optional(s.frozen(),()=>vt),clientRect:s.optional(s.frozen(),()=>new DOMRectReadOnly)}).views(t=>({worldToViewport(e,o){return t.zoomState.apply([e,o])},viewportToWorld(e,o){return t.zoomState.invert([e,o])},screenToWorld(e,o){return this.viewportToWorld(e-t.clientRect.x,o-t.clientRect.y)},get viewportExtent(){const[e,o]=this.screenToWorld(t.clientRect.left,t.clientRect.top),[n,c]=this.screenToWorld(t.clientRect.right,t.clientRect.bottom);return new DOMRectReadOnly(e,o,n-e,c-o)}})).actions(t=>({setZoomState(e){t.zoomState=e},setClientRect(e){t.clientRect=e},setIsZooming(e){t.isZooming=e}})),_e=s.model().volatile(t=>({findNearestNote(e,o){throw new Error("Please call setFindNearestNote first")},extent:new DOMRectReadOnly,stringToY(e){throw new Error("Please call setStringToY first")},fretToX(e){throw new Error("Please call setStringToY first")}})).actions(t=>({setFindNearestNote(e){t.findNearestNote=e},setStringToY(e){t.stringToY=e},setFretToX(e){t.fretToX=e},setExtent(e){t.extent=e}})).views(t=>({isPointInBoard(e,o){return e>=t.extent.left&&e<=t.extent.right&&o>=t.extent.top&&o<=t.extent.bottom}})),ze=s.model({document:s.optional(Fe,{}),tool:s.optional(Se,{}),zoom:s.optional(Pe,{}),board:s.optional(_e,{})}),Pt=Kt.box(null),De=te(t=>{Pt.set(Ie.create({},{targetStore:t}))}),tt=()=>{const t=Pt.get();if(!t)throw new Error("Attempting to get UndoManager before initialization");return t},{styled:k,createTheme:Le,globalCss:Ue,theme:{colors:R},config:lo}=ee({theme:{colors:f(f(f(f(f({},oe),ne),re),se),ie)},utils:{vStack:t=>({display:"flex",flexDirection:"column",alignItems:"center",gap:t}),hStack:t=>({display:"flex",flexDirection:"row",alignItems:"center",gap:t})}});Le({colors:f(f(f(f(f({},ce),ae),de),le),ue)});function Ae(t){return typeof t!="undefined"&&t!=null}const Oe=["E4","B3","G3","D3","A2","E2"],We=1400,_t=24,zt=p.exports.createContext({}),P=t=>{if(t<=0)return 0;const e=P(t-1);return(1-e)/17.817+e},Dt=()=>{const{minFret:t,maxFret:e,boardExtent:o,fretToX:n}=E(),c=j(t,e+1);return i(F,{children:c.map(a=>i("line",{y1:o.top,y2:o.bottom,x1:n(a),x2:n(a),stroke:R.sand8.value,strokeWidth:a===0?5:3,strokeLinecap:"round"},`fret_${a}`))})},Lt=()=>{const{minFret:t,maxFret:e,fretToX:o,stringToY:n,numStrings:c,octaveMarkerFrets:a,secondaryMarkerFrets:r}=E(),d=u=>u>t&&u<=e,l=Math.min((n(1)-n(0))/2-2,4);return y(F,{children:[r.filter(d).map(u=>i("circle",{cx:(o(u)+o(u-1))/2,cy:n((c+1)/2),r:l,fill:R.sand5.value},`marker_${u}`)),a.filter(d).map(u=>y(wt.Fragment,{children:[i("circle",{cx:(o(u)+o(u-1))/2,cy:(n(3)+n(2))/2,r:l,fill:R.sand5.value}),i("circle",{cx:(o(u)+o(u-1))/2,cy:(n(4)+n(5))/2,r:l,fill:R.sand5.value})]},`marker_${u}`))]})},Ut=()=>{const{minString:t,maxString:e,tuning:o,stringToY:n,boardExtent:c}=E(),a=j(t,e+1);return i(F,{children:a.map(r=>{const d=o[r];return i("text",{x:c.left-12,y:n(r),dominantBaseline:"middle",textAnchor:"end",fontSize:10,fontFamily:"sans-serif",style:{fill:R.sand11.value},children:d.letter},`string_number_${r}`)})})},At=()=>{const{octaveMarkerFrets:t,secondaryMarkerFrets:e,fretIsVisible:o,fretToX:n,boardExtent:c}=E(),a=[...t,...e].filter(o);return i(F,{children:a.map(r=>i("text",{x:n(r),y:c.bottom+20,textAnchor:"middle",fontSize:12,fontFamily:"sans-serif",style:{fill:R.sand11.value},children:r},`string_number_${r}`))})},Ot=()=>{const{minString:t,maxString:e,minFret:o,stringToY:n,boardExtent:c}=E(),a=j(t,e+1);return i(F,{children:a.map(r=>i("line",{x1:o===0?c.left-2.5:c.left,x2:c.right,y1:n(r),y2:n(r),strokeLinecap:"round",strokeWidth:1.5+r/4,stroke:R.sand10.value},`string_${r}`))})},Be=c=>{var a=c,{width:t,height:e,children:o}=a,n=G(a,["width","height","children"]);const{totalWidth:r,totalHeight:d,showFretNumbers:l,showStringNames:u}=E();return y("svg",q(f({viewBox:`0 0 ${r} ${d}`,width:t!=null?t:r,height:e!=null?e:d},n),{children:[i(Dt,{}),i(Lt,{}),i(Ot,{}),u&&i(Ut,{}),l&&i(At,{}),o]}))},Wt=({showFretNumbers:t=!0,showStringNames:e=!1,minFret:o=0,maxFret:n=_t,margin:c={top:16,right:16,left:e?32:16,bottom:t?32:16},tuning:a=Oe,children:r})=>{const d=a.map(m=>T.get(m)),l=a.length,u=1,h=l,v=12,M=8,z=o===0?0:M,$=n===_t?0:M,D=We*(P(n)-P(o))+c.left+c.right+z+$,L=200,x={top:c.top,right:D-c.right,bottom:L-c.bottom,left:c.left},Z=Et().domain([P(o),P(n)]).range([x.left+z,x.right-$]),b=m=>Z(P(m)),g=m=>m===o?b(m):ge(b(m-1),b(m))(.66),U=m=>m===o?b(m):(b(m-1)+b(m))/2,S=Et().domain([1,l]).range([c.top+v,x.bottom-v]),it=m=>{const A=T.get(m);return A.empty?[]:d.map((I,X)=>[A.height-I.height,X+1]).filter(([I])=>ct(I)).map(([I,X])=>({note:A,fret:I,string:X,isOpen:I===0,x:U(I),y:S(X)}))},ct=m=>m>=o&&m<=n,at=T.get(T.sortedNames(d.map(m=>T.transpose(m,Nt.fromSemitones(o))))[0]),dt=T.get(T.sortedNames(d.map(m=>T.transpose(m,Nt.fromSemitones(n))))[d.length-1]),lt=me.rangeOf("C chromatic")(at.name,dt.name).filter(Ae).map(it).flat(),$t=pe.from(lt,m=>m.x,m=>m.y),Xt=(m,A)=>lt[$t.find(m,A)],Yt=[12,24],Gt=[3,5,7,9,15,17,19,21];return i(zt.Provider,{value:{boardExtent:x,findNearestNote:Xt,fretIsVisible:ct,fretToX:b,fretToFingerX:g,maxFret:n,maxNote:dt,maxString:h,minFret:o,minNote:at,minString:u,numStrings:l,octaveMarkerFrets:Yt,placeNote:it,secondaryMarkerFrets:Gt,showFretNumbers:t,showStringNames:e,stringToY:S,totalHeight:L,totalWidth:D,tuning:d},children:r})},E=()=>p.exports.useContext(zt),et=({fret:t,string:e,label:o,outline:n=!1,shape:c="square",color:a=R.sand11})=>{const{fretToFingerX:r,stringToY:d}=E(),l=r(t),u=d(e),h=n?11:12,v=n?{fill:"white",stroke:a,strokeWidth:2}:{fill:a},M=n?{fill:a}:{fill:"white"};return y("g",{children:[c==="square"?i("rect",{width:h*2,height:h*2,x:l-h,y:u-h,rx:2,ry:2,style:v}):i("circle",{cx:l,cy:u,r:h,style:v}),o&&i("text",{x:l,y:u+1,dominantBaseline:"middle",textAnchor:"middle",fontSize:10,fontFamily:"sans-serif",fontWeight:"bold",style:M,children:o})]})},_=k("div"),$e=k("div",{height:"100%",width:"100%"}),Xe=k("svg",{outline:"none",userSelect:"none"}),Ye=k("div",{width:"100%",height:"100%",touchAction:"none",display:"flex",alignItems:"center",justifyContent:"center",gridArea:"workspace",background:"#eee",overflow:"auto"}),Ge=k("button",{background:"#eee",padding:"4px 8px",border:"none",borderRadius:4}),ot=k("button",{display:"flex",height:48,width:48,alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.1)",color:"rgba(0,0,0,0.8)",border:"none",borderRadius:100,backdropFilter:"blur(4px)","&:hover:not(:disabled)":{background:"rgba(0,0,0,0.2)"},"&:disabled":{color:"rgba(0,0,0,0.4)"}}),He=k("div",{vStack:8,position:"absolute",top:12,right:12,background:"#fff",borderRadius:12,padding:8}),Ve=k("div",{hStack:8,position:"absolute",bottom:12,left:12,right:12,padding:8}),Ze=()=>p.exports.useMemo(()=>xt(),[]),nt=n=>{var c=n,{label:t,disabled:e}=c,o=G(c,["label","disabled"]);const a=Ze();return y(_,{css:{vStack:4,alignItems:"stretch",padding:"8px 12px"},children:[i(_,{as:"label",htmlFor:a,css:{color:e?"#999":"black",fontWeight:500},children:t}),i("input",f({id:a,type:"text",disabled:e},o))]})};N(()=>{const t=C(),e=t.document.selection.items.reduce((o,n)=>o===n.props.label?o:"Mixed",t.document.selection.items.length>0?t.document.selection.items[0].props.label:"");return i(nt,{disabled:t.document.selection.isEmpty,label:"Label",value:e!=null?e:"",onChange:o=>{t.document.selection.items.forEach(n=>n.setLabel(o.currentTarget.value))}})});N(()=>{const t=C(),e=t.document.selection.items.reduce((o,n)=>o===n.props.fret?o:"Mixed",t.document.selection.items.length>0?t.document.selection.items[0].props.fret:"");return i(nt,{disabled:t.document.selection.isEmpty,label:"Fret",type:"number",value:e!=null?e:"",onChange:o=>{t.document.selection.items.forEach(n=>n.setFret(+o.currentTarget.value))}})});N(()=>{const t=C(),e=t.document.selection.items.reduce((o,n)=>o===n.props.string?o:"Mixed",t.document.selection.items.length>0?t.document.selection.items[0].props.string:"");return i(nt,{disabled:t.document.selection.isEmpty,label:"String",type:"number",value:e!=null?e:"",onChange:o=>{t.document.selection.items.forEach(n=>n.setString(+o.currentTarget.value))}})});const qe=(t,e,o,n)=>t.reduce((c,a)=>c===e(a)?c:n,t.length>0?e(t[0]):o),rt=({value:t})=>i(we,{value:t,asChild:!0,children:i(_,{as:"button",css:{background:"none",border:"none",padding:0,display:"inline-flex"},children:y("svg",{width:24,height:24,children:[i("circle",{cx:12,cy:12,r:7,fill:t}),i(Ee,{asChild:!0,children:i("circle",{cx:12,cy:12,r:10,strokeWidth:2,fill:"none",stroke:t})})]})})}),je=N(()=>{const t=C(),e=qe(t.document.selection.items,o=>o.props.color,"black",void 0);return i(he,{value:e,defaultValue:e,onValueChange:o=>t.document.selection.items.forEach(n=>n.setColor(o)),asChild:!0,children:y(_,{css:{hStack:4},children:[i(rt,{value:"black"}),i(rt,{value:"tomato"}),i(rt,{value:"teal"})]})})});N(()=>{const t=C(),[e,o]=p.exports.useState(!1);return p.exports.useEffect(()=>{t.document.selection.isEmpty&&o(!1)},[t.document.selection.isEmpty]),y(_,{css:{hStack:4,padding:"8px 12px"},children:[!e&&i("button",{disabled:t.document.selection.isEmpty,onClick:()=>{o(!0)},children:"Delete"}),e&&y(F,{children:[i("button",{onClick:()=>{o(!1)},children:"Cancel"}),i("button",{onClick:()=>{t.document.deleteEntities(t.document.selection.items),o(!1)},children:"Confirm"})]})]})});const Qe=()=>{const t=C();return i(Be,{children:t.document.entities.map(e=>i(et,f({},e.props),e.id))})};function Je(t){const e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{const n=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+n)}catch(o){console.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(e)}function Ke(t){if(!navigator.clipboard){Je(t);return}navigator.clipboard.writeText(t).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)})}const to=()=>{const t=C();return i(Ge,{onClick:()=>{const o=Te.exports.renderToString(i(st.Provider,{value:t,children:i(Wt,{minFret:t.document.board.minFret,maxFret:t.document.board.maxFret,showFretNumbers:t.document.board.showFretNumbers,children:i(Qe,{})})}));Ke(o)},children:"Copy SVG"})};function Bt(){const t=p.exports.useRef(!1);return p.exports.useEffect(()=>{const e=n=>{n.key===" "&&(n.preventDefault(),t.current=!0)},o=n=>{n.key===" "&&(n.preventDefault(),t.current=!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",o),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",o)}}),t}function eo(t){const e=Bt(),o=p.exports.useRef(null),n=p.exports.useRef(null);p.exports.useEffect(()=>{const a=n.current;if(a){o.current=Ne().scaleExtent([.1,1e3]).filter(l=>l.type==="mousedown"?e.current:l.touches?l.touches.length>1:!0);const r=o.current,d=kt(a);return r.on("start",()=>{t.zoom.setIsZooming(!0)}),r.on("zoom",l=>{t.zoom.setZoomState(l.transform)}),r.on("end",()=>{t.zoom.setIsZooming(!1)}),r(d),d.on("dblclick.zoom",null),()=>{r.on("zoom",null),r.on("start",null),r.on("end",null)}}},[]);const c=p.exports.useCallback((a,r,d)=>{o.current&&n.current&&o.current.transform(kt(n.current),vt.translate(a,r).scale(d))},[]);return[n,c]}const oo=N((a,c)=>{var r=a,{width:t,height:e,children:o}=r,n=G(r,["width","height","children"]);const{showFretNumbers:d,showStringNames:l}=E(),u=C();return i(Xe,q(f({ref:c,viewBox:`0 0 ${t} ${e}`,width:t,height:e},n),{children:y("g",{transform:u.zoom.zoomState.toString(),children:[i(Dt,{}),i(Lt,{}),i(Ot,{}),l&&i(Ut,{}),d&&i(At,{}),o]})}))},{forwardRef:!0}),no=N(({node:t})=>{const{fretToFingerX:e,stringToY:o}=E(),n=e(t.props.fret),c=o(t.props.string);return i("circle",{cx:n,cy:c,r:13,stroke:"#009EE9ff",strokeWidth:"2",fill:"none",style:{vectorEffect:"non-scaling-stroke"}})}),ro=N(({node:t})=>{const{fretToFingerX:e,stringToY:o}=E(),n=e(t.props.fret),c=o(t.props.string);return i("circle",{cx:n,cy:c,r:10,stroke:"#009EE9ff",strokeWidth:"2",fill:"none",style:{vectorEffect:"non-scaling-stroke"}})}),st=p.exports.createContext(null),C=()=>{const t=p.exports.useContext(st);if(!t)throw new Error("useRootStore must be used within a RootStoreProvider");return t},so=N(({rootStore:t})=>{const e=Bt(),{findNearestNote:o,totalWidth:n,totalHeight:c,stringToY:a,fretToFingerX:r}=E(),[d,{x:l,y:u,width:h,height:v}]=fe(),[M,z]=eo(t);p.exports.useEffect(()=>{if(h!==0&&v!==0){const g=1.5;z((h-n*g)/2,(v-c*g)/2,g)}},[h,v,z]),p.exports.useEffect(()=>{t.zoom.setClientRect(new DOMRectReadOnly(l,u,h,v))},[t,l,u,h,v]),p.exports.useEffect(()=>{t.board.setFindNearestNote(o)},[t,o]),p.exports.useEffect(()=>{t.board.setStringToY(a)},[t,a]),p.exports.useEffect(()=>{t.board.setFretToX(r)},[t,r]),p.exports.useEffect(()=>{t.board.setExtent(new DOMRectReadOnly(0,0,n,c))},[t,c,n]);const $=p.exports.useCallback(g=>{if(e.current)return;const[U,S]=t.zoom.viewportToWorld(...Tt(g));t.tool.down({x:U,y:S},g.shiftKey)},[o,t.tool,t.zoom.zoomState]),D=p.exports.useCallback(g=>{const[U,S]=t.zoom.screenToWorld(...Tt(g));t.tool.move({x:U,y:S})},[o,t.tool,t.zoom.zoomState]),L=p.exports.useCallback(g=>{t.tool.up()},[t.tool]);p.exports.useEffect(()=>(window.addEventListener("pointermove",D),window.addEventListener("pointerup",L),()=>{window.removeEventListener("pointermove",D),window.removeEventListener("pointerup",L)}));const x=tt();V("cmd+z",()=>{x.canUndo&&x.undo()});const Z=V("cmd+a",g=>{g.preventDefault(),t.document.selectAll()});V("cmd+shift+z",()=>{x.canRedo&&x.redo()}),V("backspace",()=>{t.document.selection.hasItems&&t.document.deleteEntities(t.document.selection.items)});const b=t.tool.interaction;return i(st.Provider,{value:t,children:y($e,{children:[i(Ye,{ref:d,children:y(oo,{tabIndex:0,ref:be([M,Z]),width:h,height:v,onPointerDown:$,children:[t.document.entities.map(g=>i(et,f({},g.props),g.id)),t.tool.hoveredPointer&&i(et,{shape:"circle",fret:t.tool.hoveredPointer.props.fret,string:t.tool.hoveredPointer.props.string}),t.document.selection.items.map(g=>i(no,{node:g},"selected_"+g.id)),t.tool.hoveredNode&&i(ro,{node:t.tool.hoveredNode}),(b==null?void 0:b.type)==="MARQUEE_SELECT"&&i("rect",{x:b.rect.x,y:b.rect.y,width:b.rect.width,height:b.rect.height,stroke:"#009EE966",fill:"#009EE911"})]})}),y(He,{children:[i(je,{}),i(to,{})]}),y(Ve,{children:[i(ot,{disabled:!x.canUndo,onClick:x.undo,children:i(ye,{})}),i(ot,{disabled:!x.canRedo,onClick:x.redo,children:i(xe,{})}),i(_,{css:{marginLeft:"auto"},children:i(ot,{disabled:!t.document.selection.hasItems,onClick:()=>t.document.deleteEntities(t.document.selection.items),children:i(ve,{})})})]})]})})}),io=N(()=>{const t=p.exports.useMemo(()=>{const e=ze.create({});return De(e.document),e},[]);return i(Wt,{minFret:t.document.board.minFret,maxFret:t.document.board.maxFret,showFretNumbers:t.document.board.showFretNumbers,children:i(so,{rootStore:t})})});Ue({"html, body, #root":{width:"100%",height:"100%",margin:0,padding:0,fontFamily:"system-ui"}})();ke.render(i(wt.StrictMode,{children:i(io,{})}),document.getElementById("root"));
