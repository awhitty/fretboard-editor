var Zt=Object.defineProperty,Qt=Object.defineProperties;var Jt=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var ut=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var pt=(t,e,o)=>e in t?Zt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,w=(t,e)=>{for(var o in e||(e={}))ut.call(e,o)&&pt(t,o,e[o]);if(K)for(var o of K(e))mt.call(e,o)&&pt(t,o,e[o]);return t},Y=(t,e)=>Qt(t,Jt(e));var et=(t,e)=>{var o={};for(var n in t)ut.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&K)for(var n of K(t))e.indexOf(n)<0&&mt.call(t,n)&&(o[n]=t[n]);return o};import{t as a,i as O,a as ot,b as te,l as ht,c as ee,D as oe,q as ne,s as re,d as ie,r as ae,g as se,o as ce,e as le,f as de,h as ue,j as me,k as pe,m as he,u as ge,n as gt,p as bt,v as yt,w as ft,x as q,y as be,z as ye,A as z,B as fe,C as vt,E as ve,F as xe,G as we,H as xt,I as v,J as S,K as j,L as Te,M as wt,N as nt,O as r,P as N,Q as x,R as Tt,S as Ee,T as V,U as Se,V as F,X as ke,W as Ce,Y as Et,Z as Ie,_ as Re,$ as Ne,a0 as Me,a1 as _e,a2 as Le,a3 as Oe,a4 as Pe,a5 as rt,a6 as Ae,a7 as Fe,a8 as D,a9 as De,aa as St,ab as Be,ac as Ue,ad as ze}from"./vendor.1280f2a9.js";const Ve=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}};Ve();const P=t=>a.optional(a.literal(t),t),kt={fret:0,string:0};function $e(t){return typeof t!="undefined"&&t!=null}const Ct=["E4","B3","G3","D3","A2","E2"];function We(t=Ct,e=0,o=12){const n=t.map(g=>O.get(g)),s=n.length,c=1,i=s,l=g=>{const m=O.get(g);return m.empty?[]:n.map((f,I)=>[m.height-f.height,I+1]).filter(([f])=>d(f)).map(([f,I])=>({note:m,fret:f,string:I,isOpen:f===0}))},d=g=>g>=e&&g<=o,u=O.get(O.sortedNames(n.map(g=>O.transpose(g,ot.fromSemitones(e))))[0]),T=O.get(O.sortedNames(n.map(g=>O.transpose(g,ot.fromSemitones(o))))[n.length-1]),R=te.rangeOf("C chromatic")(u.name,T.name).filter($e).map(l).flat(),k=({string:g,fret:m})=>{const f=g-1;if(f<0||f>=n.length)return null;{const I=n[f];return O.get(O.transpose(I,ot.fromSemitones(m)))}},C=[12,24].filter(d),y=[3,5,7,9,15,17,19,21].filter(d);return{tuning:n,numStrings:s,minString:c,maxString:i,fretIsVisible:d,placeNote:l,minNote:u,maxNote:T,minFret:e,maxFret:o,allNotesOnBoard:R,placementToNote:k,octaveMarkerFrets:C,secondaryMarkerFrets:y}}const Ge=1400,Xe=24,B=t=>{if(t<=0)return 0;const e=B(t-1);return(1-e)/17.817+e};function He(t,e=!0,o=!1,n={top:16,right:16,left:o?32:16,bottom:e?32:16}){const{numStrings:s,minFret:c,maxFret:i,allNotesOnBoard:l}=t,d=12,u=8,T=c===0?0:u,R=i===Xe?0:u,k=Ge*(B(i)-B(c))+n.left+n.right+T+R,C=200,y={top:n.top,right:k-n.right,bottom:C-n.bottom,left:n.left},g=ht().domain([B(c),B(i)]).range([y.left+T,y.right-R]),m=p=>g(B(p)),f=p=>p===c?m(p):ee(m(p-1),m(p))(.66),I=p=>p===c?m(p):(m(p-1)+m(p))/2,G=ht().domain([1,s]).range([n.top+d,y.bottom-d]),X=l.map(p=>Y(w({},p),{point:{x:I(p.fret),y:G(p.string)}})),tt=oe.from(X,p=>p.point.x,p=>p.point.y);return{boardExtent:y,findNearestNote:(p,H)=>X[tt.find(p,H)],fretToFingerX:f,fretToX:m,isPointInBoard:(p,H)=>p>=y.left&&p<=y.right&&H>=y.top&&H<=y.bottom,showFretNumbers:e,showStringNames:o,stringToY:G,totalHeight:C,totalWidth:k}}const{styled:_,createTheme:Ke,globalCss:Ye,theme:{colors:M},config:$o}=ne({theme:{colors:w(w(w(w(w(w({},re),ie),ae),se),ce),le)},utils:{vStack:t=>({display:"flex",flexDirection:"column",alignItems:"center",gap:t}),hStack:t=>({display:"flex",flexDirection:"row",alignItems:"center",gap:t})}});Ke({colors:w(w(w(w(w({},de),ue),me),pe),he)});const L={Dark:M.sand12.value,Medium:M.sand9.value,Blue:M.blue9.value,Red:M.tomato9.value,Mustard:M.green9.value},qe=a.union(a.literal("note-name"),a.literal("manual")),it=a.model("DotMarkerNode",{type:P("DOT_MARKER_NODE"),id:a.optional(a.identifier,()=>ge()),name:a.string,transform:a.optional(a.frozen(),kt),_fret:a.number,_string:a.number,_labelKind:a.optional(qe,"manual"),_label:a.optional(a.string,""),_shape:a.optional(a.enumeration(["circle","square"]),"circle"),_color:a.optional(a.string,"#000"),_outline:a.optional(a.boolean,!1)}).views(t=>({get props(){return{fret:t._fret+t.transform.fret,string:t._string+t.transform.string,label:t._label,labelKind:t._labelKind,shape:t._shape,color:t._color,outline:t._outline}}})).actions(t=>({setLabel(e){t._label=e},setLabelKind(e){t._labelKind=e},setShape(e){t._shape=e},setFret(e){t._fret=e},setString(e){t._string=e},setColor(e){t._color=e},setTransform(e){t.transform=e},commitTransform(){t._fret=t._fret+t.transform.fret,t._string=t._string+t.transform.string,t.transform=kt}})),je=a.model({minFret:a.optional(a.number,0),maxFret:a.optional(a.number,9),showFretNumbers:a.optional(a.boolean,!0)}).views(t=>({get logic(){return We(Ct,t.minFret,t.maxFret)},get layout(){return He(this.logic,t.showFretNumbers)}})),at=a.safeReference(it,{acceptsUndefined:!1}),Z=(t,e,o,n)=>t.reduce((s,c)=>s===e(c)?s:n,t.length>0?e(t[0]):o),It=a.model("SetLabelAction",{type:P("SET_LABEL")}).views(t=>({get labelKind(){const e=b(t);return Z(e.document.selection.items,o=>o._labelKind,"note-name","mixed")},get label(){const e=b(t);return Z(e.document.selection.items,o=>o._label,"","mixed")}})).actions(t=>({setLabel(e){this.setKind("manual"),b(t).document.selection.items.forEach(n=>n.setLabel(e))},setKind(e){b(t).document.selection.items.forEach(n=>n.setLabelKind(e))},clearLabel(){this.setLabel("")}})),Rt=a.model("SetShapeAction",{type:P("SET_SHAPE")}).views(t=>({get shape(){const e=b(t);return Z(e.document.selection.items,o=>o._shape,"circle","mixed")}})).actions(t=>({setShape(e){b(t).document.selection.items.forEach(n=>n.setShape(e))}})),Nt=a.model("SetColorAction",{type:P("SET_COLOR")}).views(t=>({get color(){const e=b(t);return Z(e.document.selection.items,o=>o._color,"black","mixed")}})).actions(t=>({setColor(e){b(t).document.selection.items.forEach(n=>n.setColor(e))}})),Mt=a.model({items:a.optional(a.array(at),[]),action:a.maybeNull(a.union(It,Rt,Nt))}).actions(t=>({startAction(e){switch(e){case"label":t.action=It.create({});break;case"shape":t.action=Rt.create({});break;case"color":t.action=Nt.create({});break}},clearAction(){t.action=null},clearActionIfEmpty(){t.items.length===0&&this.clearAction()},replace(e){t.items.replace(e),this.clearActionIfEmpty()},add(e){e.forEach(o=>{t.items.includes(o)||t.items.push(o)})},toggle(e){e.forEach(o=>{t.items.includes(o)?t.items.remove(o):t.items.push(o)}),this.clearActionIfEmpty()},remove(e){e.forEach(o=>{t.items.remove(o)}),this.clearActionIfEmpty()},clear(){t.items.replace([]),this.clearActionIfEmpty()}})).views(t=>({get isEmpty(){return t.items.length===0},get hasItems(){return t.items.length>0},contains(e){return t.items.includes(e)}})),Ze=a.model("DocumentNode",{fretboard:a.optional(je,{}),entities:a.array(it),selection:a.optional(Mt,{})}).views(t=>({entitiesAtCoord({fret:e,string:o}){return t.entities.filter(n=>n.props.fret===e&&n.props.string===o)},firstNodeAtCoord({fret:e,string:o}){return t.entities.find(n=>n.props.fret===e&&n.props.string===o)},findNodesInRect(e){return t.entities.filter(o=>{const{fret:n,string:s}=o.props,c=t.fretboard.layout.fretToX(n),i=t.fretboard.layout.stringToY(s);return c>=e.left&&c<=e.right&&i>=e.top&&i<=e.bottom})}})).actions(t=>({addDot({fret:e,string:o}){const n=it.create({name:`Marker ${t.entities.length+1}`,_fret:e,_string:o,_color:L.Dark});return t.entities.push(n),n},deleteEntities(e){e.forEach(o=>{t.selection.remove([o]),t.entities.remove(o)})},deleteSelection(){t.selection.items.forEach(e=>{t.selection.remove([e]),t.entities.remove(e)})},selectAll(){t.selection.replace(t.entities)}})),$=gt({filter(t){return!t.env},onStart(t){const e=bt(t.tree,(o,n,s)=>!!s&&yt(s,t.id));e.resume(),t.env={recorder:e}},onFinish(t,e){const o=t.env.recorder;t.env=void 0,o.stop(),e!==void 0&&o.undo()}}),Qe=a.model("UndoManagerEntry",{patches:a.frozen(),inversePatches:a.frozen()}),Je=a.model("UndoManager",{history:a.array(Qe),undoIdx:0}).views(t=>({get undoLevels(){return t.undoIdx},get redoLevels(){return t.history.length-t.undoIdx},get canUndo(){return this.undoLevels>0},get canRedo(){return this.redoLevels>0}})).actions(t=>{let e,o=0;const n=[],s=gt({filter(i){return i.env?!1:i.context!==t},onStart(i){const l=bt(i.tree,(d,u,T)=>o?!1:!!T&&yt(T,i.id)&&d.path.startsWith(ve(e)));l.resume(),i.env={recorder:l}},onFinish(i,l){const d=i.env.recorder;if(i.env=void 0,d.stop(),l===void 0)if(n.length>0){const u=n[n.length-1];u.patches=u.patches.concat(d.patches),u.inversePatches=u.inversePatches.concat(d.inversePatches)}else t.addUndoState(d);else d.undo()}}),c=i=>{o++;try{return i()}finally{o--}};return{addUndoState(i){this.withoutUndo(()=>{if(i.patches.length===0)return;t.history.splice(t.undoIdx),t.history.push({patches:i.patches,inversePatches:i.inversePatches});const l=ft(t).maxHistoryLength||1/0;t.history.splice(0,t.history.length-l),t.undoIdx=t.history.length})},afterCreate(){const i=q(t);if(e=ft(t).targetStore||i,e===t)throw new Error("UndoManager should be created as part of a tree, or with `targetStore` in it's environment");be(t,ye(e,s,!1))},undo:z($,()=>{c(()=>{if(!t.canUndo)throw new Error("undo not possible, nothing to undo");vt(q(e),t.history[t.undoIdx-1].inversePatches.slice().reverse()),t.undoIdx--})}),redo:z($,()=>{c(()=>{if(!t.canRedo)throw new Error("redo not possible, nothing to redo");vt(q(e),t.history[t.undoIdx].patches),t.undoIdx++})}),withoutUndo(i){return c(i)},withoutUndoFlow(i){return fe(function*(){o++;try{return yield*i()}finally{o--}})},startGroup(){if(n.length>=1)throw new Error("a previous startGroup is still running, did you forget to call stopGroup?");n.push({patches:[],inversePatches:[]})},stopGroup(){const i=n.pop();i&&this.addUndoState(i)},clear:z($,()=>{c(()=>{t.history.clear(),t.undoIdx=0})}),clearUndo:z($,()=>{c(()=>{t.history.splice(0,t.undoLevels),t.undoIdx=0})}),clearRedo:z($,()=>{c(()=>{t.history.splice(t.undoIdx,t.redoLevels)})})}}),_t=xe.box(null),to=we(t=>{_t.set(Je.create({},{targetStore:t}))}),U=()=>{const t=_t.get();if(!t)throw new Error("Attempting to get UndoManager before initialization");return t},Lt=a.model("PointerDot",{type:P("POINTER_DOT"),props:a.model({fret:a.number,string:a.number})}),st=a.model("BaseInteraction",{targets:a.optional(Mt,{}),start:a.frozen(),current:a.frozen()}).views(t=>({get currentNote(){return b(t).document.fretboard.layout.findNearestNote(t.current.x,t.current.y)},get startNote(){return b(t).document.fretboard.layout.findNearestNote(t.start.x,t.start.y)},get hasMoved(){return t.start.x!==t.current.x||t.start.y!==t.current.y},get rect(){return new DOMRectReadOnly(Math.min(t.start.x,t.current.x),Math.min(t.start.y,t.current.y),Math.abs(t.start.x-t.current.x),Math.abs(t.start.y-t.current.y))},get transform(){return{fret:this.currentNote.fret-this.startNote.fret,string:this.currentNote.string-this.startNote.string}},get hasMovedNote(){return this.currentNote.fret!==this.startNote.fret||this.currentNote.string!==this.startNote.string}})),Ot=a.compose(st,a.model({type:P("MARQUEE_SELECT"),isUsingShift:a.boolean})).named("MarqueeSelectInteraction").actions(t=>{function e(){const n=b(t).document.findNodesInRect(t.rect);t.isUsingShift?t.targets.add(n):t.targets.replace(n)}return{begin(){e()},update(o){t.current=o,e(),b(t).document.selection.replace(t.targets.items)},commit(){e(),b(t).document.selection.replace(t.targets.items)}}}),Pt=a.compose(st,a.model({type:P("TRANSLATE")})).named("TranslateInteraction").actions(t=>({begin(e){t.targets.replace(e)},update(e){t.current=e,t.targets.items.forEach(o=>o.setTransform(t.transform))},commit(){t.targets.items.forEach(e=>e.commitTransform())}})),At=a.compose(st,a.model({type:P("CREATE_DOT_MARKER")})).named("CreateDotMarkerInteraction").actions(t=>({begin(){const e=b(t);t.targets.replace([e.document.addDot(t.currentNote)])},update(e){t.current=e,t.targets.items.forEach(o=>o.setTransform(t.transform))},commit(){t.targets.items.forEach(o=>o.commitTransform()),b(t).document.selection.replace(t.targets.items)}})),Ft=a.model("PointerTool",{type:P("POINTER_TOOL"),interaction:a.maybeNull(a.union(Pt,Ot)),initialTarget:a.maybeNull(at),hoveredNode:a.maybeNull(at),isUsingShift:a.optional(a.boolean,!1)}).actions(t=>({down(e,o){var l;const n=b(t);U().startGroup();const s=n.document.fretboard.layout.isPointInBoard(e.x,e.y),c=n.document.fretboard.layout.findNearestNote(e.x,e.y),i=s?n.document.firstNodeAtCoord(c):null;o&&(t.isUsingShift=!0),t.hoveredNode=null,i?(t.initialTarget=i,n.document.selection.isEmpty||t.isUsingShift?n.document.selection.toggle([i]):n.document.selection.contains(i)||n.document.selection.replace([i]),t.interaction=Pt.create({start:e,current:e})):t.interaction=Ot.create({start:e,current:e,isUsingShift:o!=null?o:!1}),(l=t.interaction)==null||l.begin(n.document.selection.items)},move(e){var c;const o=b(t),n=o.document.fretboard.layout.findNearestNote(e.x,e.y),s=o.document.fretboard.layout.isPointInBoard(e.x,e.y);t.interaction?t.interaction.update(e):s?t.hoveredNode=(c=b(t).document.firstNodeAtCoord(n))!=null?c:null:t.hoveredNode=null},up(){var e,o;!((e=t.interaction)==null?void 0:e.hasMoved)&&!t.isUsingShift&&t.initialTarget&&b(t).document.selection.replace([t.initialTarget]),(o=t.interaction)==null||o.commit(),t.interaction=null,t.isUsingShift=!1,t.initialTarget=null,U().stopGroup()}})),Dt=a.model("CreateTool",{type:P("CREATE_TOOL"),interaction:a.maybeNull(a.union(At)),hoveredPointer:a.maybeNull(Lt)}).actions(t=>({down(e,o){const n=b(t);U().startGroup(),n.document.fretboard.layout.isPointInBoard(e.x,e.y)&&(t.hoveredPointer=null,t.interaction=At.create({start:e,current:e}),t.interaction.begin())},move(e){const o=b(t),n=o.document.fretboard.layout.findNearestNote(e.x,e.y),s=o.document.fretboard.layout.isPointInBoard(e.x,e.y);t.interaction?t.interaction.update(e):s?t.hoveredPointer=Lt.create({props:{fret:n.fret,string:n.string}}):t.hoveredPointer=null},up(){var e;(e=t.interaction)==null||e.commit(),t.interaction=null,U().stopGroup()}}));function b(t){return q(t)}const eo=a.model({isZooming:a.optional(a.boolean,!1),zoomState:a.optional(a.frozen(),()=>xt),clientRect:a.optional(a.frozen(),()=>new DOMRectReadOnly)}).views(t=>({worldToViewport(e,o){return t.zoomState.apply([e,o])},viewportToWorld(e,o){return t.zoomState.invert([e,o])},screenToWorld(e,o){return this.viewportToWorld(e-t.clientRect.x,o-t.clientRect.y)},worldValueToViewportValue(e){return e*t.zoomState.k},worldRectToViewportRect(e){const[o,n]=this.worldToViewport(e.x,e.y),s=this.worldValueToViewportValue(e.width),c=this.worldValueToViewportValue(e.height);return new DOMRectReadOnly(o,n,s,c)},get viewportExtent(){const[e,o]=this.screenToWorld(t.clientRect.left,t.clientRect.top),[n,s]=this.screenToWorld(t.clientRect.right,t.clientRect.bottom);return new DOMRectReadOnly(e,o,n-e,s-o)}})).actions(t=>({setZoomState(e){t.zoomState=e},setClientRect(e){t.clientRect=e},setIsZooming(e){t.isZooming=e}})),oo=a.model({document:a.optional(Ze,{}),tool:a.optional(a.union(Ft,Dt),{}),viewport:a.optional(eo,{})}).actions(t=>({setToolType(e){switch(e){case"POINTER_TOOL":t.tool=Ft.create();return;case"CREATE_TOOL":t.tool=Dt.create();return}}})),ct=v.exports.createContext(null),E=()=>{const t=v.exports.useContext(ct);if(!t)throw new Error("useRootStore must be used within a RootStoreProvider");return t},no=S(()=>{const t=E(),e=U();return j("cmd+z",()=>{e.canUndo&&e.undo()}),j("cmd+a",o=>{o.preventDefault(),t.document.selectAll()}),j("cmd+shift+z",()=>{e.canRedo&&e.redo()}),j("backspace",()=>{t.document.selection.hasItems&&t.document.deleteEntities(t.document.selection.items)}),null});function Bt(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function Ut(){const t=v.exports.useRef(!1);return v.exports.useEffect(()=>{const e=n=>{n.key===" "&&(n.preventDefault(),t.current=!0)},o=n=>{n.key===" "&&(n.preventDefault(),t.current=!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",o),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",o)}}),t}function ro(t){const e=Ut(),o=v.exports.useRef(null),n=v.exports.useRef(null);v.exports.useEffect(()=>{const c=n.current;if(c){o.current=Te().scaleExtent([.1,1e3]).filter(d=>d.type==="mousedown"?e.current:d.touches?d.touches.length>1:!0);const i=o.current,l=wt(c);return i.on("start",()=>{t.viewport.setIsZooming(!0)}),i.on("zoom",d=>{t.viewport.setZoomState(d.transform)}),i.on("end",()=>{t.viewport.setIsZooming(!1)}),i(l),l.on("dblclick.zoom",null),()=>{i.on("zoom",null),i.on("start",null),i.on("end",null)}}},[]);const s=v.exports.useCallback((c,i,l)=>{o.current&&n.current&&o.current.transform(wt(n.current),xt.translate(c,i).scale(l))},[]);return[n,s]}const zt=v.exports.createContext({}),Vt=()=>{const{minFret:t,maxFret:e,boardExtent:o,fretToX:n}=A(),s=nt(t,e+1);return r(N,{children:s.map(c=>r("line",{y1:o.top,y2:o.bottom,x1:n(c),x2:n(c),stroke:M.sand8.value,strokeWidth:c===0?5:3,strokeLinecap:"round"},`fret_${c}`))})},$t=()=>{const{minFret:t,maxFret:e,fretToX:o,stringToY:n,numStrings:s,octaveMarkerFrets:c,secondaryMarkerFrets:i}=A(),l=u=>u>t&&u<=e,d=Math.min((n(1)-n(0))/2-2,4);return x(N,{children:[i.filter(l).map(u=>r("circle",{cx:(o(u)+o(u-1))/2,cy:n((s+1)/2),r:d,fill:M.sand5.value},`marker_${u}`)),c.filter(l).map(u=>x(Tt.Fragment,{children:[r("circle",{cx:(o(u)+o(u-1))/2,cy:(n(3)+n(2))/2,r:d,fill:M.sand5.value}),r("circle",{cx:(o(u)+o(u-1))/2,cy:(n(4)+n(5))/2,r:d,fill:M.sand5.value})]},`marker_${u}`))]})},Wt=()=>{const{minString:t,maxString:e,tuning:o,stringToY:n,boardExtent:s}=A(),c=nt(t,e+1);return r(N,{children:c.map(i=>{const l=o[i];return r("text",{x:s.left-12,y:n(i),dominantBaseline:"middle",textAnchor:"end",fontSize:10,fontFamily:"sans-serif",style:{fill:M.sand11.value},children:l.letter},`string_number_${i}`)})})},Gt=()=>{const{octaveMarkerFrets:t,secondaryMarkerFrets:e,fretIsVisible:o,fretToX:n,boardExtent:s}=A(),c=[...t,...e].filter(o);return r(N,{children:c.map(i=>r("text",{x:n(i),y:s.bottom+20,textAnchor:"middle",fontSize:12,fontFamily:"sans-serif",style:{fill:M.sand11.value},children:i},`string_number_${i}`))})},Xt=()=>{const{minString:t,maxString:e,minFret:o,stringToY:n,boardExtent:s}=A(),c=nt(t,e+1);return r(N,{children:c.map(i=>r("line",{x1:o===0?s.left-2.5:s.left,x2:s.right,y1:n(i),y2:n(i),strokeLinecap:"round",strokeWidth:1.5+i/4,stroke:M.sand10.value},`string_${i}`))})},io=s=>{var c=s,{width:t,height:e,children:o}=c,n=et(c,["width","height","children"]);const{totalWidth:i,totalHeight:l,showFretNumbers:d,showStringNames:u}=A();return x("svg",Y(w({viewBox:`0 0 ${i} ${l}`,width:t!=null?t:i,height:e!=null?e:l},n),{children:[r(Vt,{}),r($t,{}),r(Xt,{}),u&&r(Wt,{}),d&&r(Gt,{}),o]}))},Ht=({logic:t,layout:e,children:o})=>{const{fretIsVisible:n,maxFret:s,maxNote:c,maxString:i,minFret:l,minNote:d,minString:u,numStrings:T,octaveMarkerFrets:R,placeNote:k,placementToNote:C,secondaryMarkerFrets:y,tuning:g}=t,{boardExtent:m,findNearestNote:f,fretToFingerX:I,fretToX:G,showFretNumbers:X,showStringNames:tt,stringToY:lt,totalHeight:dt,totalWidth:p}=e;return r(zt.Provider,{value:{boardExtent:m,findNearestNote:f,fretIsVisible:n,fretToX:G,placementToNote:C,fretToFingerX:I,maxFret:s,maxNote:c,maxString:i,minFret:l,minNote:d,minString:u,numStrings:T,octaveMarkerFrets:R,placeNote:k,secondaryMarkerFrets:y,showFretNumbers:X,showStringNames:tt,stringToY:lt,totalHeight:dt,totalWidth:p,tuning:g},children:o})},A=()=>v.exports.useContext(zt),ao=t=>{const e=t.letter,o=t.alt===-1?"b":t.alt===1?"#":"";return`${e}${o}`},Kt=({fret:t,string:e,label:o,labelKind:n="manual",outline:s=!1,shape:c="square",color:i=M.sand11})=>{const{fretToFingerX:l,stringToY:d,placementToNote:u}=A(),T=l(t),R=d(e),k=s?11:12,C=s?{fill:"white",stroke:i,strokeWidth:2}:{fill:i},y=s?{fill:i}:{fill:"white"},g=u({fret:t,string:e}),m=n==="note-name"?g?ao(g):"":o;return x("g",{children:[c==="square"?r("rect",{width:k*2,height:k*2,x:T-k,y:R-k,rx:2,ry:2,style:C}):r("circle",{cx:T,cy:R,r:k,style:C}),m&&r("text",{x:T,y:R+1,dominantBaseline:"middle",textAnchor:"middle",fontSize:10,fontFamily:"sans-serif",fontWeight:"bold",style:y,children:m})]})},so=_("svg",{outline:"none",userSelect:"none"}),co=S((s,n)=>{var c=s,{width:t,height:e}=c,o=et(c,["width","height"]);const i=E();return r(Ht,{logic:i.document.fretboard.logic,layout:i.document.fretboard.layout,children:x(so,Y(w({ref:n,viewBox:`0 0 ${t} ${e}`,width:t,height:e},o),{children:[x("g",{transform:i.viewport.zoomState.toString(),children:[r(Vt,{}),r($t,{}),r(Xt,{}),i.document.fretboard.layout.showStringNames&&r(Wt,{}),i.document.fretboard.layout.showFretNumbers&&r(Gt,{}),r(ho,{})]}),r(go,{})]}))})},{forwardRef:!0}),lo=S(({node:t})=>{const{fretToFingerX:e,stringToY:o}=A(),n=E(),[s,c]=n.viewport.worldToViewport(e(t.props.fret),o(t.props.string)),i=n.viewport.worldValueToViewportValue(13);return r(N,{children:r("circle",{cx:s,cy:c,r:i,stroke:"#009EE9ff",strokeWidth:"1.5",fill:"none"})})}),uo=S(({node:t})=>{const{fretToFingerX:e,stringToY:o}=A(),n=E(),[s,c]=n.viewport.worldToViewport(e(t.props.fret),o(t.props.string)),i=n.viewport.worldValueToViewportValue(10);return r("circle",{cx:s,cy:c,r:i,stroke:"#009EE9ff",strokeWidth:"2",fill:"none"})}),mo=S(({tool:t})=>{const e=E(),o=t.interaction,n=(o==null?void 0:o.type)==="MARQUEE_SELECT"?e.viewport.worldRectToViewportRect(o.rect):null;return x(N,{children:[t.hoveredNode&&r(uo,{node:t.hoveredNode}),n&&r("rect",{x:n.x,y:n.y,width:n.width,height:n.height,stroke:"#009EE966",fill:"#009EE911"})]})}),po=S(({tool:t})=>{const{fretToFingerX:e,stringToY:o}=A(),n=E();if(t.hoveredPointer){const[s,c]=n.viewport.worldToViewport(e(t.hoveredPointer.props.fret),o(t.hoveredPointer.props.string)),i=n.viewport.worldValueToViewportValue(10);return r(N,{children:t.hoveredPointer&&r("circle",{cx:s,cy:c,r:i,fill:"black",opacity:.5})})}else return null}),ho=S(()=>{const t=E();return r(N,{children:t.document.entities.map(e=>r(Kt,w({},e.props),e.id))})}),go=S(()=>{const t=E();return x(N,{children:[t.document.selection.items.map(e=>r(lo,{node:e},"selected_"+e.id)),t.tool.type==="POINTER_TOOL"&&r(mo,{tool:t.tool}),t.tool.type==="CREATE_TOOL"&&r(po,{tool:t.tool})]})}),bo=()=>{const t=E();return r(io,{children:t.document.entities.map(e=>r(Kt,w({},e.props),e.id))})};function yo(t){const e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{const n=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+n)}catch(o){console.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(e)}function fo(t){if(!navigator.clipboard){yo(t);return}navigator.clipboard.writeText(t).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)})}const vo=()=>{const t=E();return v.exports.useCallback(()=>{const e=Ee.exports.renderToString(r(ct.Provider,{value:t,children:r(Ht,{logic:t.document.fretboard.logic,layout:t.document.fretboard.layout,children:r(bo,{})})}));fo(e)},[t])},Yt=_("div"),xo=_("div",{hStack:8,position:"absolute",bottom:12,left:12,right:12,padding:8}),wo=_("div",{hStack:8,justifyContent:"center",position:"absolute",top:12,left:12,right:12,padding:8}),To=_("div",{$$edgeButtonDirection:"row",vStack:8,alignItems:"flex-start",justifyContent:"center",position:"absolute",top:12,bottom:12,left:12,padding:8}),W=_("div",{width:8,height:8}),Q=_("div",{$$edgeButtonDirection:"row-reverse",vStack:8,alignItems:"flex-end",justifyContent:"center",position:"absolute",top:12,bottom:12,right:12,padding:8}),Eo=_("button",{hStack:12,padding:0,border:0,background:"none",outline:"none",color:"rgb(60,60,60)",appearance:"none","-webkit-tap-highlight-color":"transparent",userSelect:"none",flexDirection:"$$edgeButtonDirection","&:hover":{background:"none"},"&:disabled":{color:"rgb(180,180,180)"}}),qt=_("div",{display:"flex",height:48,width:48,alignItems:"center",justifyContent:"center",background:"rgba(180,180,180,0.3)",color:"rgb(80,80,80)",border:"none",borderRadius:100,backdropFilter:"blur(4px)",boxShadow:"0 0 0 0 #009EE9aa",variants:{isSelected:{true:{color:"#009EE9ff",background:"rgba(255,255,255,.6)",boxShadow:"0 0 0 2px #009EE9aa","&:hover:not(:disabled)":{color:"#009EE9ff",background:"rgba(255,255,255,.6)"}},false:{}},isDisabled:{true:{background:"rgba(60,60,60,0.05)",color:"rgb(180,180,180)"},false:{}},isFilled:{true:{"& svg":{fill:"$$fillColor",stroke:"$$fillColor"}}}}}),jt=_("div",{fontSize:13,fontWeight:500}),So={initial:{x:-72},animate:{x:0,opacity:1,transition:{type:"spring",duration:.4,bounce:.2}},exit:{opacity:0,transition:{duration:.1,type:"tween"}}},ko={initial:{y:72},animate:{y:0,opacity:1,transition:{type:"spring",duration:.4,bounce:.2}},exit:{opacity:0,transition:{duration:.1,type:"tween"}}},Co={initial:{y:-72},animate:{y:0,opacity:1,transition:{type:"spring",duration:.4,bounce:.2}},exit:{opacity:0,transition:{duration:.1,type:"tween"}}},J={initial:{x:72},animate:{x:0,opacity:1,transition:{type:"spring",duration:.4,bounce:.2}},exit:{opacity:0,transition:{duration:.1,type:"tween"}}},h=({Icon:t,label:e,fillColor:o,isSelected:n=!1,isDisabled:s=!1,iconOnly:c=!1,onClick:i})=>r(Eo,{as:F.button,whileTap:s?void 0:{scale:.9},whileHover:s?void 0:{scale:1.1},disabled:s,onClick:i,css:{$$fillColor:o},children:c?x(N,{children:[r(qt,{isSelected:n,isFilled:!!o,isDisabled:s,children:r(t,{size:20})}),r(Pe,{children:r(jt,{children:e})})]}):x(N,{children:[r(qt,{isSelected:n,isDisabled:s,children:r(t,{size:20})}),r(jt,{children:e})]})}),Io=t=>{const e=E();return x(Q,{as:F.div,variants:J,initial:"initial",animate:"animate",exit:"exit",children:[r(h,{Icon:rt,label:"Back",onClick:e.document.selection.clearAction},"back"),r(W,{}),r(h,{Icon:Ae,label:"Automatic",onClick:()=>t.action.setKind("note-name")},"auto"),r(h,{Icon:Fe,label:"Clear",onClick:t.action.clearLabel},"clear")]},"set-label-buttons")},Ro=({action:t})=>{const e=E();return x(Q,{as:F.div,variants:J,initial:"initial",animate:"animate",exit:"exit",children:[r(h,{Icon:rt,label:"Back",onClick:e.document.selection.clearAction},"back"),r(W,{}),r(h,{Icon:D,iconOnly:!0,label:"Dark",fillColor:L.Dark,onClick:()=>t.setColor(L.Dark)},"black"),r(h,{Icon:D,iconOnly:!0,label:"Medium",fillColor:L.Medium,onClick:()=>t.setColor(L.Medium)},"black"),r(h,{Icon:D,iconOnly:!0,label:"Blue",fillColor:L.Blue,onClick:()=>t.setColor(L.Blue)},"blue"),r(h,{Icon:D,iconOnly:!0,label:"Red",fillColor:L.Red,onClick:()=>t.setColor(L.Red)},"red"),r(h,{Icon:D,iconOnly:!0,label:"Mustard",fillColor:L.Mustard,onClick:()=>t.setColor(L.Mustard)},"green")]},"set-label-buttons")},No=({action:t})=>{const e=E();return x(Q,{as:F.div,variants:J,initial:"initial",animate:"animate",exit:"exit",children:[r(h,{Icon:rt,label:"Back",onClick:e.document.selection.clearAction},"back"),r(W,{}),r(h,{Icon:D,label:"Circle",onClick:()=>t.setShape("circle")},"black"),r(h,{Icon:Et,label:"Square",onClick:()=>t.setShape("square")},"black")]},"set-label-buttons")},Mo=S(()=>{const e=E().document.selection.action;return r(V,{children:Se.match(e).with({type:"SET_LABEL"},o=>r(Io,{action:o})).with({type:"SET_COLOR"},o=>r(Ro,{action:o})).with({type:"SET_SHAPE"},o=>r(No,{action:o})).otherwise(()=>null)})}),_o=S(()=>{const t=E(),e=t.document.selection.action;return r(V,{children:!e&&t.document.selection.hasItems&&x(Q,{as:F.div,variants:J,initial:"initial",animate:"animate",exit:"exit",children:[r(h,{Icon:ke,label:"Deselect",onClick:t.document.selection.clear},"deselect"),r(W,{}),r(h,{Icon:Ce,label:"Label",onClick:()=>t.document.selection.startAction("label")},"label"),r(h,{Icon:Et,label:"Shape",onClick:()=>t.document.selection.startAction("shape")},"shape"),r(h,{Icon:Ie,label:"Color",onClick:()=>t.document.selection.startAction("color")},"color"),r(W,{}),r(h,{Icon:Re,label:"Delete",onClick:t.document.deleteSelection},"delete")]},"selection-buttons")})}),Lo=S(()=>{const t=E();return r(V,{children:x(To,{as:F.div,variants:So,initial:"initial",animate:"animate",exit:"exit",children:[r(h,{Icon:Ne,label:"Select",onClick:()=>t.setToolType("POINTER_TOOL"),isSelected:t.tool.type==="POINTER_TOOL"}),r(h,{Icon:Me,label:"Add",onClick:()=>t.setToolType("CREATE_TOOL"),isSelected:t.tool.type==="CREATE_TOOL"})]},"tool-select")})}),Oo=S(()=>{var e;const t=E();return r(V,{children:((e=t.document.selection.action)==null?void 0:e.type)==="SET_LABEL"&&r(wo,{as:F.div,variants:Co,initial:"initial",animate:"animate",exit:"exit",children:r(Yt,{as:"input",css:{border:"none",borderRadius:8,marginTop:24,boxShadow:"0px 0px 0px 0px #009EE9aa",transition:"box-shadow 0.2s ease-out",fontSize:28,padding:8,outline:"none",backdropFilter:"blur(4px)",background:"rgba(255,255,255,.8)",color:"rgb(80,80,80)","&:focus":{boxShadow:"0px 0px 0px 2px #009EE9aa"}},type:"text",value:t.document.selection.action.label,onChange:o=>t.document.selection.action.setLabel(o.currentTarget.value)})},"label-editor")})}),Po=S(()=>{const t=vo(),e=U();return r(V,{children:x(xo,{as:F.div,variants:ko,initial:"initial",animate:"animate",exit:"exit",children:[r(h,{Icon:_e,iconOnly:!0,label:"Undo",isDisabled:!e.canUndo,onClick:e.undo},"undo"),r(h,{Icon:Le,iconOnly:!0,label:"Redo",isDisabled:!e.canRedo,onClick:e.redo},"redo"),r(Yt,{css:{marginLeft:"auto",hStack:8},children:r(h,{Icon:Oe,iconOnly:!0,label:"Copy to clipboard",onClick:t},"copy")})]})})}),Ao=S(()=>x(N,{children:[r(_o,{}),r(Mo,{}),r(Lo,{}),r(Oo,{}),r(Po,{})]})),Fo=_("div",{height:"100%",width:"100%"}),Do=_("div",{width:"100%",height:"100%",touchAction:"none",display:"flex",alignItems:"center",justifyContent:"center",gridArea:"workspace",background:"#eee",overflow:"auto"}),Bo=S(({rootStore:t})=>{const e=Ut(),{totalWidth:o,totalHeight:n}=t.document.fretboard.layout,[s,{x:c,y:i,width:l,height:d}]=De(),[u,T]=ro(t);v.exports.useEffect(()=>{if(l!==0&&d!==0){const m=1.5;T((l-o*m)/2,(d-n*m)/2,m)}},[l,d,T]),v.exports.useEffect(()=>{t.viewport.setClientRect(new DOMRectReadOnly(c,i,l,d))},[t,c,i,l,d]);const R=v.exports.useCallback(m=>{if(m.preventDefault(),e.current)return;const[f,I]=t.viewport.viewportToWorld(...St(m));t.tool.down({x:f,y:I},m.shiftKey)},[t.tool,t.viewport.zoomState]),k=v.exports.useCallback(m=>{m.preventDefault(),console.log("touchstart");const[f,I]=t.viewport.viewportToWorld(...Be(m)[0]);t.tool.down({x:f,y:I},m.shiftKey)},[t.tool,t.viewport.zoomState]),C=v.exports.useCallback(m=>{const[f,I]=t.viewport.screenToWorld(...St(m));t.tool.move({x:f,y:I})},[t.tool,t.viewport.zoomState]),y=v.exports.useCallback(()=>{t.tool.up()},[t.tool]);v.exports.useEffect(()=>Bt()?(window.addEventListener("touchmove",C),window.addEventListener("touchend",y),()=>{window.removeEventListener("touchmove",C),window.removeEventListener("touchend",y)}):(window.addEventListener("mousemove",C),window.addEventListener("mouseup",y),()=>{window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",y)}),[C,y]);const g=v.exports.useMemo(()=>Bt()?{onTouchStart:k}:{onMouseDown:R},[k,R]);return x(ct.Provider,{value:t,children:[r(no,{}),x(Fo,{children:[r(Do,{ref:s,children:r(co,w({tabIndex:0,ref:u,width:l,height:d},g))}),r(Ao,{})]})]})}),Uo=S(()=>{const t=v.exports.useMemo(()=>{const e=oo.create({});return to(e.document),Ue(e),e},[]);return r(Bo,{rootStore:t})});Ye({"html, body, #root":{width:"100%",height:"100%",margin:0,padding:0,fontFamily:"system-ui",overflow:"hidden",position:"fixed"}})();ze.render(r(Tt.StrictMode,{children:r(Uo,{})}),document.getElementById("root"));
