var Kt=Object.defineProperty,Jt=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var mt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable;var ht=(t,e,o)=>e in t?Kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,f=(t,e)=>{for(var o in e||(e={}))mt.call(e,o)&&ht(t,o,e[o]);if(Z)for(var o of Z(e))pt.call(e,o)&&ht(t,o,e[o]);return t},q=(t,e)=>Jt(t,te(e));var j=(t,e)=>{var o={};for(var n in t)mt.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&Z)for(var n of Z(t))e.indexOf(n)<0&&pt.call(t,n)&&(o[n]=t[n]);return o};import{t as i,u as gt,c as ft,r as yt,i as bt,g as xt,a as Q,b as ee,d as oe,e as Y,f as ne,h as vt,j as re,o as ie,k as se,l as Tt,q as ae,s as ce,m as de,n as le,p as ue,v as me,w as pe,x as he,y as ge,z as fe,A as ye,B as p,C as J,D as r,F as E,E as y,R as wt,G as I,H as Et,I as kt,J as be,K as xe,L as ve,M as b,N as Te,O as we,P as Ct,Q as Nt,S as F,X as Ee,T as ke,U as Ce,V as Ne,W as Re,Y as Ie,Z as Se,_ as Me,$ as Rt,a0 as Pe,a1 as K,a2 as _e,a3 as Fe,a4 as Oe,a5 as It,a6 as Le,a7 as De}from"./vendor.2013c5c5.js";const Ae=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(a){if(a.ep)return;a.ep=!0;const c=o(a);fetch(a.href,c)}};Ae();const O=t=>i.optional(i.literal(t),t),St={fret:0,string:0},tt=i.model("DotMarkerNode",{type:O("DOT_MARKER_NODE"),id:i.optional(i.identifier,()=>gt()),name:i.string,transform:i.optional(i.frozen(),St),_fret:i.number,_string:i.number,_label:i.optional(i.string,""),_shape:i.optional(i.enumeration(["circle","square"]),"circle"),_color:i.optional(i.string,"#000"),_outline:i.optional(i.boolean,!1)}).views(t=>({get props(){return{fret:t._fret+t.transform.fret,string:t._string+t.transform.string,label:t._label,shape:t._shape,color:t._color,outline:t._outline}}})).actions(t=>({setLabel(e){t._label=e},setFret(e){t._fret=e},setString(e){t._string=e},setColor(e){t._color=e},setTransform(e){t.transform=e},commitTransform(){t._fret=t._fret+t.transform.fret,t._string=t._string+t.transform.string,t.transform=St}})),ze=i.model({minFret:i.optional(i.number,0),maxFret:i.optional(i.number,9),showFretNumbers:i.optional(i.boolean,!0)}),et=i.safeReference(tt,{acceptsUndefined:!1}),Mt=i.model({items:i.optional(i.array(et),[])}).actions(t=>({replace(e){t.items.replace(e)},add(e){e.forEach(o=>{t.items.includes(o)||t.items.push(o)})},toggle(e){e.forEach(o=>{t.items.includes(o)?t.items.remove(o):t.items.push(o)})},remove(e){e.forEach(o=>{t.items.remove(o)})},clear(){t.items.replace([])}})).views(t=>({get isEmpty(){return t.items.length===0},get hasItems(){return t.items.length>0},contains(e){return t.items.includes(e)}})),Ue=i.model("DocumentNode",{boardConfig:i.optional(ze,{}),entities:i.array(tt),selection:i.optional(Mt,{})}).views(t=>({entitiesAtCoord({fret:e,string:o}){return t.entities.filter(n=>n.props.fret===e&&n.props.string===o)},firstNodeAtCoord({fret:e,string:o}){return t.entities.find(n=>n.props.fret===e&&n.props.string===o)},findNodesInRect(e){return t.entities.filter(o=>{const n=x(t),{fret:a,string:c}=o.props,s=n.board.fretToX(a),d=n.board.stringToY(c);return s>=e.left&&s<=e.right&&d>=e.top&&d<=e.bottom})}})).actions(t=>({addDot({fret:e,string:o}){const n=tt.create({name:`Marker ${t.entities.length+1}`,_fret:e,_string:o});return t.entities.push(n),n},deleteEntities(e){e.forEach(o=>{t.selection.remove([o]),t.entities.remove(o)})},selectAll(){t.selection.replace(t.entities)}})),H=ft({filter(t){return!t.env},onStart(t){const e=yt(t.tree,(o,n,a)=>!!a&&bt(a,t.id));e.resume(),t.env={recorder:e}},onFinish(t,e){const o=t.env.recorder;t.env=void 0,o.stop(),e!==void 0&&o.undo()}}),Be=i.model("UndoManagerEntry",{patches:i.frozen(),inversePatches:i.frozen()}),We=i.model("UndoManager",{history:i.array(Be),undoIdx:0}).views(t=>({get undoLevels(){return t.undoIdx},get redoLevels(){return t.history.length-t.undoIdx},get canUndo(){return this.undoLevels>0},get canRedo(){return this.redoLevels>0}})).actions(t=>{let e,o=0;const n=[],a=ft({filter(s){return s.env?!1:s.context!==t},onStart(s){const d=yt(s.tree,(l,u,g)=>o?!1:!!g&&bt(g,s.id)&&l.path.startsWith(re(e)));d.resume(),s.env={recorder:d}},onFinish(s,d){const l=s.env.recorder;if(s.env=void 0,l.stop(),d===void 0)if(n.length>0){const u=n[n.length-1];u.patches=u.patches.concat(l.patches),u.inversePatches=u.inversePatches.concat(l.inversePatches)}else t.addUndoState(l);else l.undo()}}),c=s=>{o++;try{return s()}finally{o--}};return{addUndoState(s){this.withoutUndo(()=>{if(s.patches.length===0)return;t.history.splice(t.undoIdx),t.history.push({patches:s.patches,inversePatches:s.inversePatches});const d=xt(t).maxHistoryLength||1/0;t.history.splice(0,t.history.length-d),t.undoIdx=t.history.length})},afterCreate(){const s=Q(t);if(e=xt(t).targetStore||s,e===t)throw new Error("UndoManager should be created as part of a tree, or with `targetStore` in it's environment");ee(t,oe(e,a,!1))},undo:Y(H,()=>{c(()=>{if(!t.canUndo)throw new Error("undo not possible, nothing to undo");vt(Q(e),t.history[t.undoIdx-1].inversePatches.slice().reverse()),t.undoIdx--})}),redo:Y(H,()=>{c(()=>{if(!t.canRedo)throw new Error("redo not possible, nothing to redo");vt(Q(e),t.history[t.undoIdx].patches),t.undoIdx++})}),withoutUndo(s){return c(s)},withoutUndoFlow(s){return ne(function*(){o++;try{return yield*s()}finally{o--}})},startGroup(){if(n.length>=1)throw new Error("a previous startGroup is still running, did you forget to call stopGroup?");n.push({patches:[],inversePatches:[]})},stopGroup(){const s=n.pop();s&&this.addUndoState(s)},clear:Y(H,()=>{c(()=>{t.history.clear(),t.undoIdx=0})}),clearUndo:Y(H,()=>{c(()=>{t.history.splice(0,t.undoLevels),t.undoIdx=0})}),clearRedo:Y(H,()=>{c(()=>{t.history.splice(t.undoIdx,t.redoLevels)})})}}),Pt=ie.box(null),$e=se(t=>{Pt.set(We.create({},{targetStore:t}))}),z=()=>{const t=Pt.get();if(!t)throw new Error("Attempting to get UndoManager before initialization");return t},_t=i.model("PointerDot",{type:O("POINTER_DOT"),props:i.model({fret:i.number,string:i.number})}),ot=i.model("BaseInteraction",{targets:i.optional(Mt,{}),start:i.frozen(),current:i.frozen()}).views(t=>({get currentNote(){return x(t).board.findNearestNote(t.current.x,t.current.y)},get startNote(){return x(t).board.findNearestNote(t.start.x,t.start.y)},get hasMoved(){return t.start.x!==t.current.x||t.start.y!==t.current.y},get rect(){return new DOMRectReadOnly(Math.min(t.start.x,t.current.x),Math.min(t.start.y,t.current.y),Math.abs(t.start.x-t.current.x),Math.abs(t.start.y-t.current.y))},get transform(){return{fret:this.currentNote.fret-this.startNote.fret,string:this.currentNote.string-this.startNote.string}},get hasMovedNote(){return this.currentNote.fret!==this.startNote.fret||this.currentNote.string!==this.startNote.string}})),Ft=i.compose(ot,i.model({type:O("MARQUEE_SELECT"),isUsingShift:i.boolean})).named("MarqueeSelectInteraction").actions(t=>{function e(){const n=x(t).document.findNodesInRect(t.rect);t.isUsingShift?t.targets.add(n):t.targets.replace(n)}return{begin(){e()},update(o){t.current=o,e(),x(t).document.selection.replace(t.targets.items)},commit(){e(),x(t).document.selection.replace(t.targets.items)}}}),Ot=i.compose(ot,i.model({type:O("TRANSLATE")})).named("TranslateInteraction").actions(t=>({begin(e){t.targets.replace(e)},update(e){t.current=e,t.targets.items.forEach(o=>o.setTransform(t.transform))},commit(){t.targets.items.forEach(e=>e.commitTransform())}})),Lt=i.compose(ot,i.model({type:O("CREATE_DOT_MARKER")})).named("CreateDotMarkerInteraction").actions(t=>({begin(){const e=x(t);t.targets.replace([e.document.addDot(t.currentNote)])},update(e){t.current=e,t.targets.items.forEach(o=>o.setTransform(t.transform))},commit(){t.targets.items.forEach(o=>o.commitTransform()),x(t).document.selection.replace(t.targets.items)}})),Dt=i.model("PointerTool",{type:O("POINTER_TOOL"),interaction:i.maybeNull(i.union(Ot,Ft)),initialTarget:i.maybeNull(et),hoveredNode:i.maybeNull(et),isUsingShift:i.optional(i.boolean,!1)}).actions(t=>({down(e,o){var d;const n=x(t);z().startGroup();const a=n.board.isPointInBoard(e.x,e.y),c=n.board.findNearestNote(e.x,e.y),s=a?n.document.firstNodeAtCoord(c):null;o&&(t.isUsingShift=!0),t.hoveredNode=null,s?(t.initialTarget=s,n.document.selection.isEmpty||t.isUsingShift?n.document.selection.toggle([s]):n.document.selection.contains(s)||n.document.selection.replace([s]),t.interaction=Ot.create({start:e,current:e})):t.interaction=Ft.create({start:e,current:e,isUsingShift:o!=null?o:!1}),(d=t.interaction)==null||d.begin(n.document.selection.items)},move(e){var c;const o=x(t),n=o.board.findNearestNote(e.x,e.y),a=o.board.isPointInBoard(e.x,e.y);t.interaction?t.interaction.update(e):a?t.hoveredNode=(c=x(t).document.firstNodeAtCoord(n))!=null?c:null:t.hoveredNode=null},up(){var e,o;!((e=t.interaction)==null?void 0:e.hasMoved)&&!t.isUsingShift&&t.initialTarget&&x(t).document.selection.replace([t.initialTarget]),(o=t.interaction)==null||o.commit(),t.interaction=null,t.isUsingShift=!1,t.initialTarget=null,z().stopGroup()}})),At=i.model("CreateTool",{type:O("CREATE_TOOL"),interaction:i.maybeNull(i.union(Lt)),hoveredPointer:i.maybeNull(_t)}).actions(t=>({down(e,o){const n=x(t);z().startGroup(),n.board.isPointInBoard(e.x,e.y)&&(t.hoveredPointer=null,t.interaction=Lt.create({start:e,current:e}),t.interaction.begin())},move(e){const o=x(t),n=o.board.findNearestNote(e.x,e.y),a=o.board.isPointInBoard(e.x,e.y);t.interaction?t.interaction.update(e):a?t.hoveredPointer=_t.create({props:{fret:n.fret,string:n.string}}):t.hoveredPointer=null},up(){var e;(e=t.interaction)==null||e.commit(),t.interaction=null,z().stopGroup()}}));function x(t){return Q(t)}const Xe=i.model({isZooming:i.optional(i.boolean,!1),zoomState:i.optional(i.frozen(),()=>Tt),clientRect:i.optional(i.frozen(),()=>new DOMRectReadOnly)}).views(t=>({worldToViewport(e,o){return t.zoomState.apply([e,o])},viewportToWorld(e,o){return t.zoomState.invert([e,o])},screenToWorld(e,o){return this.viewportToWorld(e-t.clientRect.x,o-t.clientRect.y)},get viewportExtent(){const[e,o]=this.screenToWorld(t.clientRect.left,t.clientRect.top),[n,a]=this.screenToWorld(t.clientRect.right,t.clientRect.bottom);return new DOMRectReadOnly(e,o,n-e,a-o)}})).actions(t=>({setZoomState(e){t.zoomState=e},setClientRect(e){t.clientRect=e},setIsZooming(e){t.isZooming=e}})),Ge=i.model().volatile(()=>({findNearestNote(t,e){throw new Error("Please call setFindNearestNote first")},extent:new DOMRectReadOnly,stringToY(t){throw new Error("Please call setStringToY first")},fretToX(t){throw new Error("Please call setStringToY first")}})).actions(t=>({setFindNearestNote(e){t.findNearestNote=e},setStringToY(e){t.stringToY=e},setFretToX(e){t.fretToX=e},setExtent(e){t.extent=e}})).views(t=>({isPointInBoard(e,o){return e>=t.extent.left&&e<=t.extent.right&&o>=t.extent.top&&o<=t.extent.bottom}})),Ye=i.model({document:i.optional(Ue,{}),tool:i.optional(i.union(Dt,At),{}),viewport:i.optional(Xe,{}),board:i.optional(Ge,{})}).actions(t=>({setToolType(e){switch(e){case"POINTER_TOOL":t.tool=Dt.create();return;case"CREATE_TOOL":t.tool=At.create();return}}})),{styled:S,createTheme:He,globalCss:Ve,theme:{colors:M},config:wo}=ae({theme:{colors:f(f(f(f(f({},ce),de),le),ue),me)},utils:{vStack:t=>({display:"flex",flexDirection:"column",alignItems:"center",gap:t}),hStack:t=>({display:"flex",flexDirection:"row",alignItems:"center",gap:t})}});He({colors:f(f(f(f(f({},pe),he),ge),fe),ye)});function Ze(t){return typeof t!="undefined"&&t!=null}const qe=["E4","B3","G3","D3","A2","E2"],je=1400,zt=24,Ut=p.exports.createContext({}),U=t=>{if(t<=0)return 0;const e=U(t-1);return(1-e)/17.817+e},Bt=()=>{const{minFret:t,maxFret:e,boardExtent:o,fretToX:n}=T(),a=J(t,e+1);return r(E,{children:a.map(c=>r("line",{y1:o.top,y2:o.bottom,x1:n(c),x2:n(c),stroke:M.sand8.value,strokeWidth:c===0?5:3,strokeLinecap:"round"},`fret_${c}`))})},Wt=()=>{const{minFret:t,maxFret:e,fretToX:o,stringToY:n,numStrings:a,octaveMarkerFrets:c,secondaryMarkerFrets:s}=T(),d=u=>u>t&&u<=e,l=Math.min((n(1)-n(0))/2-2,4);return y(E,{children:[s.filter(d).map(u=>r("circle",{cx:(o(u)+o(u-1))/2,cy:n((a+1)/2),r:l,fill:M.sand5.value},`marker_${u}`)),c.filter(d).map(u=>y(wt.Fragment,{children:[r("circle",{cx:(o(u)+o(u-1))/2,cy:(n(3)+n(2))/2,r:l,fill:M.sand5.value}),r("circle",{cx:(o(u)+o(u-1))/2,cy:(n(4)+n(5))/2,r:l,fill:M.sand5.value})]},`marker_${u}`))]})},$t=()=>{const{minString:t,maxString:e,tuning:o,stringToY:n,boardExtent:a}=T(),c=J(t,e+1);return r(E,{children:c.map(s=>{const d=o[s];return r("text",{x:a.left-12,y:n(s),dominantBaseline:"middle",textAnchor:"end",fontSize:10,fontFamily:"sans-serif",style:{fill:M.sand11.value},children:d.letter},`string_number_${s}`)})})},Xt=()=>{const{octaveMarkerFrets:t,secondaryMarkerFrets:e,fretIsVisible:o,fretToX:n,boardExtent:a}=T(),c=[...t,...e].filter(o);return r(E,{children:c.map(s=>r("text",{x:n(s),y:a.bottom+20,textAnchor:"middle",fontSize:12,fontFamily:"sans-serif",style:{fill:M.sand11.value},children:s},`string_number_${s}`))})},Gt=()=>{const{minString:t,maxString:e,minFret:o,stringToY:n,boardExtent:a}=T(),c=J(t,e+1);return r(E,{children:c.map(s=>r("line",{x1:o===0?a.left-2.5:a.left,x2:a.right,y1:n(s),y2:n(s),strokeLinecap:"round",strokeWidth:1.5+s/4,stroke:M.sand10.value},`string_${s}`))})},Qe=a=>{var c=a,{width:t,height:e,children:o}=c,n=j(c,["width","height","children"]);const{totalWidth:s,totalHeight:d,showFretNumbers:l,showStringNames:u}=T();return y("svg",q(f({viewBox:`0 0 ${s} ${d}`,width:t!=null?t:s,height:e!=null?e:d},n),{children:[r(Bt,{}),r(Wt,{}),r(Gt,{}),u&&r($t,{}),l&&r(Xt,{}),o]}))},Yt=({showFretNumbers:t=!0,showStringNames:e=!1,minFret:o=0,maxFret:n=zt,margin:a={top:16,right:16,left:e?32:16,bottom:t?32:16},tuning:c=qe,children:s})=>{const d=c.map(m=>I.get(m)),l=c.length,u=1,g=l,v=12,D=8,W=o===0?0:D,$=n===zt?0:D,X=je*(U(n)-U(o))+a.left+a.right+W+$,N=200,w={top:a.top,right:X-a.right,bottom:N-a.bottom,left:a.left},A=Et().domain([U(o),U(n)]).range([w.left+W,w.right-$]),C=m=>A(U(m)),h=m=>m===o?C(m):ve(C(m-1),C(m))(.66),P=m=>m===o?C(m):(C(m-1)+C(m))/2,R=Et().domain([1,l]).range([a.top+v,w.bottom-v]),at=m=>{const G=I.get(m);return G.empty?[]:d.map((_,V)=>[G.height-_.height,V+1]).filter(([_])=>ct(_)).map(([_,V])=>({note:G,fret:_,string:V,isOpen:_===0,x:P(_),y:R(V)}))},ct=m=>m>=o&&m<=n,dt=I.get(I.sortedNames(d.map(m=>I.transpose(m,kt.fromSemitones(o))))[0]),lt=I.get(I.sortedNames(d.map(m=>I.transpose(m,kt.fromSemitones(n))))[d.length-1]),ut=be.rangeOf("C chromatic")(dt.name,lt.name).filter(Ze).map(at).flat(),Zt=xe.from(ut,m=>m.x,m=>m.y),qt=(m,G)=>ut[Zt.find(m,G)],jt=[12,24],Qt=[3,5,7,9,15,17,19,21];return r(Ut.Provider,{value:{boardExtent:w,findNearestNote:qt,fretIsVisible:ct,fretToX:C,fretToFingerX:h,maxFret:n,maxNote:lt,maxString:g,minFret:o,minNote:dt,minString:u,numStrings:l,octaveMarkerFrets:jt,placeNote:at,secondaryMarkerFrets:Qt,showFretNumbers:t,showStringNames:e,stringToY:R,totalHeight:N,totalWidth:X,tuning:d},children:s})},T=()=>p.exports.useContext(Ut),nt=({fret:t,string:e,label:o,outline:n=!1,shape:a="square",color:c=M.sand11})=>{const{fretToFingerX:s,stringToY:d}=T(),l=s(t),u=d(e),g=n?11:12,v=n?{fill:"white",stroke:c,strokeWidth:2}:{fill:c},D=n?{fill:c}:{fill:"white"};return y("g",{children:[a==="square"?r("rect",{width:g*2,height:g*2,x:l-g,y:u-g,rx:2,ry:2,style:v}):r("circle",{cx:l,cy:u,r:g,style:v}),o&&r("text",{x:l,y:u+1,dominantBaseline:"middle",textAnchor:"middle",fontSize:10,fontFamily:"sans-serif",fontWeight:"bold",style:D,children:o})]})},B=S("div"),Ke=S("div",{height:"100%",width:"100%"}),Je=S("svg",{outline:"none",userSelect:"none"}),to=S("div",{width:"100%",height:"100%",touchAction:"none",display:"flex",alignItems:"center",justifyContent:"center",gridArea:"workspace",background:"#eee",overflow:"auto"});S("button",{background:"#eee",padding:"4px 8px",border:"none",borderRadius:4});const L=S("button",{display:"flex",height:48,width:48,alignItems:"center",justifyContent:"center",background:"rgba(120,120,120,0.2)",color:"rgb(123,123,124)",border:"none",borderRadius:100,backdropFilter:"blur(4px)","&:hover:not(:disabled)":{background:"rgba(0,0,0,0.15)",color:"rgb(80,80,80)"},"&:disabled":{background:"rgba(0,0,0,0.05)",color:"rgb(180,180,180)"},variants:{isActive:{true:{color:"#009EE9ff",background:"rgba(255,255,255,.6)",boxShadow:"0px 0px 0px 2px #009EE9aa","&:hover:not(:disabled)":{color:"#009EE9ff",background:"rgba(255,255,255,.6)"}},false:{}}}}),eo=S("div",{hStack:8,position:"absolute",bottom:12,left:12,right:12,padding:8}),oo=S("div",{vStack:8,justifyContent:"center",position:"absolute",top:12,bottom:12,left:12,padding:8});function Ht(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}const no=()=>p.exports.useMemo(()=>gt(),[]),rt=n=>{var a=n,{label:t,disabled:e}=a,o=j(a,["label","disabled"]);const c=no();return y(B,{css:{vStack:4,alignItems:"stretch",padding:"8px 12px"},children:[r(B,{as:"label",htmlFor:c,css:{color:e?"#999":"black",fontWeight:500},children:t}),r("input",f({id:c,type:"text",disabled:e},o))]})};b(()=>{const t=k(),e=t.document.selection.items.reduce((o,n)=>o===n.props.label?o:"Mixed",t.document.selection.items.length>0?t.document.selection.items[0].props.label:"");return r(rt,{disabled:t.document.selection.isEmpty,label:"Label",value:e!=null?e:"",onChange:o=>{t.document.selection.items.forEach(n=>n.setLabel(o.currentTarget.value))}})});b(()=>{const t=k(),e=t.document.selection.items.reduce((o,n)=>o===n.props.fret?o:"Mixed",t.document.selection.items.length>0?t.document.selection.items[0].props.fret:"");return r(rt,{disabled:t.document.selection.isEmpty,label:"Fret",type:"number",value:e!=null?e:"",onChange:o=>{t.document.selection.items.forEach(n=>n.setFret(+o.currentTarget.value))}})});b(()=>{const t=k(),e=t.document.selection.items.reduce((o,n)=>o===n.props.string?o:"Mixed",t.document.selection.items.length>0?t.document.selection.items[0].props.string:"");return r(rt,{disabled:t.document.selection.isEmpty,label:"String",type:"number",value:e!=null?e:"",onChange:o=>{t.document.selection.items.forEach(n=>n.setString(+o.currentTarget.value))}})});const ro=(t,e,o,n)=>t.reduce((a,c)=>a===e(c)?a:n,t.length>0?e(t[0]):o),it=({value:t})=>r(_e,{value:t,asChild:!0,children:r(B,{as:"button",css:{background:"none",border:"none",padding:0,display:"inline-flex"},children:y("svg",{width:24,height:24,children:[r("circle",{cx:12,cy:12,r:7,fill:t}),r(Fe,{asChild:!0,children:r("circle",{cx:12,cy:12,r:10,strokeWidth:2,fill:"none",stroke:t})})]})})});b(()=>{const t=k(),e=ro(t.document.selection.items,o=>o.props.color,"black",void 0);return r(Te,{value:e,defaultValue:e,onValueChange:o=>t.document.selection.items.forEach(n=>n.setColor(o)),asChild:!0,children:y(B,{css:{hStack:4},children:[r(it,{value:"black"}),r(it,{value:"tomato"}),r(it,{value:"teal"})]})})});b(()=>{const t=k(),[e,o]=p.exports.useState(!1);return p.exports.useEffect(()=>{t.document.selection.isEmpty&&o(!1)},[t.document.selection.isEmpty]),y(B,{css:{hStack:4,padding:"8px 12px"},children:[!e&&r("button",{disabled:t.document.selection.isEmpty,onClick:()=>{o(!0)},children:"Delete"}),e&&y(E,{children:[r("button",{onClick:()=>{o(!1)},children:"Cancel"}),r("button",{onClick:()=>{t.document.deleteEntities(t.document.selection.items),o(!1)},children:"Confirm"})]})]})});const io=()=>{const t=k();return r(Qe,{children:t.document.entities.map(e=>r(nt,f({},e.props),e.id))})};function so(t){const e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{const n=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+n)}catch(o){console.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(e)}function ao(t){if(!navigator.clipboard){so(t);return}navigator.clipboard.writeText(t).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)})}const co=()=>{const t=k();return p.exports.useCallback(()=>{const e=we.exports.renderToString(r(st.Provider,{value:t,children:r(Yt,{minFret:t.document.boardConfig.minFret,maxFret:t.document.boardConfig.maxFret,showFretNumbers:t.document.boardConfig.showFretNumbers,children:r(io,{})})}));ao(e)},[t])};function Vt(){const t=p.exports.useRef(!1);return p.exports.useEffect(()=>{const e=n=>{n.key===" "&&(n.preventDefault(),t.current=!0)},o=n=>{n.key===" "&&(n.preventDefault(),t.current=!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",o),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",o)}}),t}function lo(t){const e=Vt(),o=p.exports.useRef(null),n=p.exports.useRef(null);p.exports.useEffect(()=>{const c=n.current;if(c){o.current=Oe().scaleExtent([.1,1e3]).filter(l=>l.type==="mousedown"?e.current:l.touches?l.touches.length>1:!0);const s=o.current,d=It(c);return s.on("start",()=>{t.viewport.setIsZooming(!0)}),s.on("zoom",l=>{t.viewport.setZoomState(l.transform)}),s.on("end",()=>{t.viewport.setIsZooming(!1)}),s(d),d.on("dblclick.zoom",null),()=>{s.on("zoom",null),s.on("start",null),s.on("end",null)}}},[]);const a=p.exports.useCallback((c,s,d)=>{o.current&&n.current&&o.current.transform(It(n.current),Tt.translate(c,s).scale(d))},[]);return[n,a]}const uo=b((c,a)=>{var s=c,{width:t,height:e,children:o}=s,n=j(s,["width","height","children"]);const{showFretNumbers:d,showStringNames:l}=T(),u=k();return r(Je,q(f({ref:a,viewBox:`0 0 ${t} ${e}`,width:t,height:e},n),{children:y("g",{transform:u.viewport.zoomState.toString(),children:[r(Bt,{}),r(Wt,{}),r(Gt,{}),l&&r($t,{}),d&&r(Xt,{}),o]})}))},{forwardRef:!0}),mo=b(({node:t})=>{const{fretToFingerX:e,stringToY:o}=T(),n=e(t.props.fret),a=o(t.props.string);return r("circle",{cx:n,cy:a,r:13,stroke:"#009EE9ff",strokeWidth:"2",fill:"none",style:{vectorEffect:"non-scaling-stroke"}})}),po=b(({node:t})=>{const{fretToFingerX:e,stringToY:o}=T(),n=e(t.props.fret),a=o(t.props.string);return r("circle",{cx:n,cy:a,r:10,stroke:"#009EE9ff",strokeWidth:"2",fill:"none",style:{vectorEffect:"non-scaling-stroke"}})}),st=p.exports.createContext(null),k=()=>{const t=p.exports.useContext(st);if(!t)throw new Error("useRootStore must be used within a RootStoreProvider");return t},ho=b(({tool:t})=>{const e=t.interaction;return y(E,{children:[t.hoveredNode&&r(po,{node:t.hoveredNode}),(e==null?void 0:e.type)==="MARQUEE_SELECT"&&r("rect",{x:e.rect.x,y:e.rect.y,width:e.rect.width,height:e.rect.height,stroke:"#009EE966",fill:"#009EE911"})]})}),go=b(({tool:t})=>(t.interaction,r(E,{children:t.hoveredPointer&&r(nt,{shape:"circle",fret:t.hoveredPointer.props.fret,string:t.hoveredPointer.props.string})}))),fo=b(()=>{const t=k();return y(E,{children:[t.document.entities.map(e=>r(nt,f({},e.props),e.id)),t.document.selection.items.map(e=>r(mo,{node:e},"selected_"+e.id)),t.tool.type==="POINTER_TOOL"&&r(ho,{tool:t.tool}),t.tool.type==="CREATE_TOOL"&&r(go,{tool:t.tool})]})}),yo=b(()=>{const t=co(),e=z(),o=k();return y(E,{children:[r(oo,{children:r(Ct,{children:y(Nt,{children:[o.document.selection.hasItems&&r(L,{as:F.button,layout:!0,initial:{x:-72},animate:{x:0,opacity:1},exit:{opacity:0},whileTap:{scale:.9},onClick:()=>o.document.selection.clear(),children:r(Ee,{size:20})},"deselect"),r(L,{as:F.button,layout:!0,initial:{x:-72},animate:{x:0,opacity:1},exit:{opacity:0},whileTap:{scale:.9},onClick:()=>o.setToolType("POINTER_TOOL"),isActive:o.tool.type==="POINTER_TOOL",children:r(ke,{size:20})},"pointer"),r(L,{as:F.button,layout:!0,initial:{x:-72},animate:{x:0,opacity:1},exit:{opacity:0},whileTap:{scale:.9},onClick:()=>o.setToolType("CREATE_TOOL"),isActive:o.tool.type==="CREATE_TOOL",children:r(Ce,{size:20})},"create"),o.document.selection.hasItems&&r(L,{as:F.button,layout:!0,initial:{x:-72},animate:{x:0,opacity:1},exit:{opacity:0},whileTap:{scale:.9},onClick:()=>o.document.deleteEntities(o.document.selection.items),children:r(Ne,{size:20})},"delete")]})})}),r(eo,{children:r(Ct,{children:y(Nt,{children:[r(L,{as:F.button,layout:!0,initial:{y:72},animate:{y:0,opacity:1},exit:{opacity:0},whileTap:{scale:.9},disabled:!e.canUndo,onClick:e.undo,children:r(Re,{size:20})},"undo"),r(L,{as:F.button,layout:!0,initial:{y:72},animate:{y:0,opacity:1},exit:{opacity:0},whileTap:{scale:.9},disabled:!e.canRedo,onClick:e.redo,children:r(Ie,{size:20})},"redo"),r(B,{css:{marginLeft:"auto",hStack:8},children:r(L,{as:F.button,layout:!0,initial:{y:72},animate:{y:0,opacity:1},exit:{opacity:0},whileTap:{scale:.9},onClick:t,children:r(Se,{size:20})},"copy")})]})})})]})}),bo=b(({rootStore:t})=>{const e=Vt(),{findNearestNote:o,totalWidth:n,totalHeight:a,stringToY:c,fretToFingerX:s}=T(),[d,{x:l,y:u,width:g,height:v}]=Me(),[D,W]=lo(t);p.exports.useEffect(()=>{if(g!==0&&v!==0){const h=1.5;W((g-n*h)/2,(v-a*h)/2,h)}},[g,v,W]),p.exports.useEffect(()=>{t.viewport.setClientRect(new DOMRectReadOnly(l,u,g,v))},[t,l,u,g,v]),p.exports.useEffect(()=>{t.board.setFindNearestNote(o)},[t,o]),p.exports.useEffect(()=>{t.board.setStringToY(c)},[t,c]),p.exports.useEffect(()=>{t.board.setFretToX(s)},[t,s]),p.exports.useEffect(()=>{t.board.setExtent(new DOMRectReadOnly(0,0,n,a))},[t,a,n]);const $=p.exports.useCallback(h=>{if(h.preventDefault(),e.current)return;const[P,R]=t.viewport.viewportToWorld(...Rt(h));t.tool.down({x:P,y:R},h.shiftKey)},[t.tool,t.viewport.zoomState]),X=p.exports.useCallback(h=>{h.preventDefault(),console.log("touchstart");const[P,R]=t.viewport.viewportToWorld(...Pe(h)[0]);t.tool.down({x:P,y:R},h.shiftKey)},[t.tool,t.viewport.zoomState]),N=p.exports.useCallback(h=>{const[P,R]=t.viewport.screenToWorld(...Rt(h));t.tool.move({x:P,y:R})},[t.tool,t.viewport.zoomState]),w=p.exports.useCallback(h=>{t.tool.up()},[t.tool]);p.exports.useEffect(()=>Ht()?(window.addEventListener("touchmove",N),window.addEventListener("touchend",w),()=>{window.removeEventListener("touchmove",N),window.removeEventListener("touchend",w)}):(window.addEventListener("mousemove",N),window.addEventListener("mouseup",w),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",w)}),[N,w]);const A=z();K("cmd+z",()=>{A.canUndo&&A.undo()}),K("cmd+a",h=>{h.preventDefault(),t.document.selectAll()}),K("cmd+shift+z",()=>{A.canRedo&&A.redo()}),K("backspace",()=>{t.document.selection.hasItems&&t.document.deleteEntities(t.document.selection.items)});const C=p.exports.useMemo(()=>Ht()?{onTouchStart:X}:{onMouseDown:$},[X,$]);return r(st.Provider,{value:t,children:y(Ke,{children:[r(to,{ref:d,children:r(uo,q(f({tabIndex:0,ref:D,width:g,height:v},C),{children:r(fo,{})}))}),r(yo,{})]})})}),xo=b(()=>{const t=p.exports.useMemo(()=>{const e=Ye.create({});return $e(e.document),Le(e),e},[]);return r(Yt,{minFret:t.document.boardConfig.minFret,maxFret:t.document.boardConfig.maxFret,showFretNumbers:t.document.boardConfig.showFretNumbers,children:r(bo,{rootStore:t})})});Ve({"html, body, #root":{width:"100%",height:"100%",margin:0,padding:0,fontFamily:"system-ui"}})();De.render(r(wt.StrictMode,{children:r(xo,{})}),document.getElementById("root"));
