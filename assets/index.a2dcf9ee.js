var ce=Object.defineProperty,le=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var yt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var xt=(t,e,o)=>e in t?ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,f=(t,e)=>{for(var o in e||(e={}))yt.call(e,o)&&xt(t,o,e[o]);if(j)for(var o of j(e))ft.call(e,o)&&xt(t,o,e[o]);return t},et=(t,e)=>le(t,de(e));var ot=(t,e)=>{var o={};for(var n in t)yt.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&j)for(var n of j(t))e.indexOf(n)<0&&ft.call(t,n)&&(o[n]=t[n]);return o};import{t as i,u as ue,c as vt,r as wt,i as Tt,g as Et,a as q,b as pe,d as me,e as G,f as he,h as kt,j as ge,o as be,k as ye,l as Ct,q as fe,s as xe,m as ve,n as we,p as Te,v as Ee,w as ke,x as Ce,y as Se,z as Re,A as Ie,B as m,C as nt,D as r,F as T,E as g,R as St,G as L,H as Rt,I as rt,J as Ne,K as _e,L as Le,M as S,N as R,O as it,P as Y,S as It,Q as Me,X as Oe,T as Pe,U as Ae,V as Fe,W as De,Y as ze,Z as at,_ as Be,$ as Ue,a0 as Ve,a1 as $e,a2 as We,a3 as Xe,a4 as Nt,a5 as Ge,a6 as Z,a7 as Ye,a8 as _t,a9 as Ke,aa as He,ab as je}from"./vendor.dcdee4a7.js";const qe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}};qe();const M=t=>i.optional(i.literal(t),t),Lt={fret:0,string:0},Ze=i.union(i.literal("note-name"),i.literal("manual")),st=i.model("DotMarkerNode",{type:M("DOT_MARKER_NODE"),id:i.optional(i.identifier,()=>ue()),name:i.string,transform:i.optional(i.frozen(),Lt),_fret:i.number,_string:i.number,_labelKind:i.optional(Ze,"manual"),_label:i.optional(i.string,""),_shape:i.optional(i.enumeration(["circle","square"]),"circle"),_color:i.optional(i.string,"#000"),_outline:i.optional(i.boolean,!1)}).views(t=>({get props(){return{fret:t._fret+t.transform.fret,string:t._string+t.transform.string,label:t._label,labelKind:t._labelKind,shape:t._shape,color:t._color,outline:t._outline}}})).actions(t=>({setLabel(e){t._label=e},setLabelKind(e){t._labelKind=e},setShape(e){t._shape=e},setFret(e){t._fret=e},setString(e){t._string=e},setColor(e){t._color=e},setTransform(e){t.transform=e},commitTransform(){t._fret=t._fret+t.transform.fret,t._string=t._string+t.transform.string,t.transform=Lt}})),Qe=i.model({minFret:i.optional(i.number,0),maxFret:i.optional(i.number,9),showFretNumbers:i.optional(i.boolean,!0)}),ct=i.safeReference(st,{acceptsUndefined:!1}),Q=(t,e,o,n)=>t.reduce((s,c)=>s===e(c)?s:n,t.length>0?e(t[0]):o),Mt=i.model("SetLabelAction",{type:M("SET_LABEL")}).views(t=>({get labelKind(){const e=h(t);return Q(e.document.selection.items,o=>o._labelKind,"note-name","mixed")},get label(){const e=h(t);return Q(e.document.selection.items,o=>o._label,"","mixed")}})).actions(t=>({setLabel(e){this.setKind("manual"),h(t).document.selection.items.forEach(n=>n.setLabel(e))},setKind(e){h(t).document.selection.items.forEach(n=>n.setLabelKind(e))},clearLabel(){this.setLabel("")}})),Ot=i.model("SetShapeAction",{type:M("SET_SHAPE")}).views(t=>({get shape(){const e=h(t);return Q(e.document.selection.items,o=>o._shape,"circle","mixed")}})).actions(t=>({setShape(e){h(t).document.selection.items.forEach(n=>n.setShape(e))}})),Pt=i.model("SetColorAction",{type:M("SET_COLOR")}).views(t=>({get color(){const e=h(t);return Q(e.document.selection.items,o=>o._color,"black","mixed")}})).actions(t=>({setColor(e){h(t).document.selection.items.forEach(n=>n.setColor(e))}})),At=i.model({items:i.optional(i.array(ct),[]),action:i.maybeNull(i.union(Mt,Ot,Pt))}).actions(t=>({startAction(e){switch(e){case"label":t.action=Mt.create({});break;case"shape":t.action=Ot.create({});break;case"color":t.action=Pt.create({});break}},clearAction(){t.action=null},clearActionIfEmpty(){t.items.length===0&&this.clearAction()},replace(e){t.items.replace(e),this.clearActionIfEmpty()},add(e){e.forEach(o=>{t.items.includes(o)||t.items.push(o)})},toggle(e){e.forEach(o=>{t.items.includes(o)?t.items.remove(o):t.items.push(o)}),this.clearActionIfEmpty()},remove(e){e.forEach(o=>{t.items.remove(o)}),this.clearActionIfEmpty()},clear(){t.items.replace([]),this.clearActionIfEmpty()}})).views(t=>({get isEmpty(){return t.items.length===0},get hasItems(){return t.items.length>0},contains(e){return t.items.includes(e)}})),Je=i.model("DocumentNode",{boardConfig:i.optional(Qe,{}),entities:i.array(st),selection:i.optional(At,{})}).views(t=>({entitiesAtCoord({fret:e,string:o}){return t.entities.filter(n=>n.props.fret===e&&n.props.string===o)},firstNodeAtCoord({fret:e,string:o}){return t.entities.find(n=>n.props.fret===e&&n.props.string===o)},findNodesInRect(e){return t.entities.filter(o=>{const n=h(t),{fret:s,string:c}=o.props,a=n.board.fretToX(s),l=n.board.stringToY(c);return a>=e.left&&a<=e.right&&l>=e.top&&l<=e.bottom})}})).actions(t=>({addDot({fret:e,string:o}){const n=st.create({name:`Marker ${t.entities.length+1}`,_fret:e,_string:o});return t.entities.push(n),n},deleteEntities(e){e.forEach(o=>{t.selection.remove([o]),t.entities.remove(o)})},deleteSelection(){t.selection.items.forEach(e=>{t.selection.remove([e]),t.entities.remove(e)})},selectAll(){t.selection.replace(t.entities)}})),K=vt({filter(t){return!t.env},onStart(t){const e=wt(t.tree,(o,n,s)=>!!s&&Tt(s,t.id));e.resume(),t.env={recorder:e}},onFinish(t,e){const o=t.env.recorder;t.env=void 0,o.stop(),e!==void 0&&o.undo()}}),to=i.model("UndoManagerEntry",{patches:i.frozen(),inversePatches:i.frozen()}),eo=i.model("UndoManager",{history:i.array(to),undoIdx:0}).views(t=>({get undoLevels(){return t.undoIdx},get redoLevels(){return t.history.length-t.undoIdx},get canUndo(){return this.undoLevels>0},get canRedo(){return this.redoLevels>0}})).actions(t=>{let e,o=0;const n=[],s=vt({filter(a){return a.env?!1:a.context!==t},onStart(a){const l=wt(a.tree,(d,p,x)=>o?!1:!!x&&Tt(x,a.id)&&d.path.startsWith(ge(e)));l.resume(),a.env={recorder:l}},onFinish(a,l){const d=a.env.recorder;if(a.env=void 0,d.stop(),l===void 0)if(n.length>0){const p=n[n.length-1];p.patches=p.patches.concat(d.patches),p.inversePatches=p.inversePatches.concat(d.inversePatches)}else t.addUndoState(d);else d.undo()}}),c=a=>{o++;try{return a()}finally{o--}};return{addUndoState(a){this.withoutUndo(()=>{if(a.patches.length===0)return;t.history.splice(t.undoIdx),t.history.push({patches:a.patches,inversePatches:a.inversePatches});const l=Et(t).maxHistoryLength||1/0;t.history.splice(0,t.history.length-l),t.undoIdx=t.history.length})},afterCreate(){const a=q(t);if(e=Et(t).targetStore||a,e===t)throw new Error("UndoManager should be created as part of a tree, or with `targetStore` in it's environment");pe(t,me(e,s,!1))},undo:G(K,()=>{c(()=>{if(!t.canUndo)throw new Error("undo not possible, nothing to undo");kt(q(e),t.history[t.undoIdx-1].inversePatches.slice().reverse()),t.undoIdx--})}),redo:G(K,()=>{c(()=>{if(!t.canRedo)throw new Error("redo not possible, nothing to redo");kt(q(e),t.history[t.undoIdx].patches),t.undoIdx++})}),withoutUndo(a){return c(a)},withoutUndoFlow(a){return he(function*(){o++;try{return yield*a()}finally{o--}})},startGroup(){if(n.length>=1)throw new Error("a previous startGroup is still running, did you forget to call stopGroup?");n.push({patches:[],inversePatches:[]})},stopGroup(){const a=n.pop();a&&this.addUndoState(a)},clear:G(K,()=>{c(()=>{t.history.clear(),t.undoIdx=0})}),clearUndo:G(K,()=>{c(()=>{t.history.splice(0,t.undoLevels),t.undoIdx=0})}),clearRedo:G(K,()=>{c(()=>{t.history.splice(t.undoIdx,t.redoLevels)})})}}),Ft=be.box(null),oo=ye(t=>{Ft.set(eo.create({},{targetStore:t}))}),W=()=>{const t=Ft.get();if(!t)throw new Error("Attempting to get UndoManager before initialization");return t},Dt=i.model("PointerDot",{type:M("POINTER_DOT"),props:i.model({fret:i.number,string:i.number})}),lt=i.model("BaseInteraction",{targets:i.optional(At,{}),start:i.frozen(),current:i.frozen()}).views(t=>({get currentNote(){return h(t).board.findNearestNote(t.current.x,t.current.y)},get startNote(){return h(t).board.findNearestNote(t.start.x,t.start.y)},get hasMoved(){return t.start.x!==t.current.x||t.start.y!==t.current.y},get rect(){return new DOMRectReadOnly(Math.min(t.start.x,t.current.x),Math.min(t.start.y,t.current.y),Math.abs(t.start.x-t.current.x),Math.abs(t.start.y-t.current.y))},get transform(){return{fret:this.currentNote.fret-this.startNote.fret,string:this.currentNote.string-this.startNote.string}},get hasMovedNote(){return this.currentNote.fret!==this.startNote.fret||this.currentNote.string!==this.startNote.string}})),zt=i.compose(lt,i.model({type:M("MARQUEE_SELECT"),isUsingShift:i.boolean})).named("MarqueeSelectInteraction").actions(t=>{function e(){const n=h(t).document.findNodesInRect(t.rect);t.isUsingShift?t.targets.add(n):t.targets.replace(n)}return{begin(){e()},update(o){t.current=o,e(),h(t).document.selection.replace(t.targets.items)},commit(){e(),h(t).document.selection.replace(t.targets.items)}}}),Bt=i.compose(lt,i.model({type:M("TRANSLATE")})).named("TranslateInteraction").actions(t=>({begin(e){t.targets.replace(e)},update(e){t.current=e,t.targets.items.forEach(o=>o.setTransform(t.transform))},commit(){t.targets.items.forEach(e=>e.commitTransform())}})),Ut=i.compose(lt,i.model({type:M("CREATE_DOT_MARKER")})).named("CreateDotMarkerInteraction").actions(t=>({begin(){const e=h(t);t.targets.replace([e.document.addDot(t.currentNote)])},update(e){t.current=e,t.targets.items.forEach(o=>o.setTransform(t.transform))},commit(){t.targets.items.forEach(o=>o.commitTransform()),h(t).document.selection.replace(t.targets.items)}})),Vt=i.model("PointerTool",{type:M("POINTER_TOOL"),interaction:i.maybeNull(i.union(Bt,zt)),initialTarget:i.maybeNull(ct),hoveredNode:i.maybeNull(ct),isUsingShift:i.optional(i.boolean,!1)}).actions(t=>({down(e,o){var l;const n=h(t);W().startGroup();const s=n.board.isPointInBoard(e.x,e.y),c=n.board.findNearestNote(e.x,e.y),a=s?n.document.firstNodeAtCoord(c):null;o&&(t.isUsingShift=!0),t.hoveredNode=null,a?(t.initialTarget=a,n.document.selection.isEmpty||t.isUsingShift?n.document.selection.toggle([a]):n.document.selection.contains(a)||n.document.selection.replace([a]),t.interaction=Bt.create({start:e,current:e})):t.interaction=zt.create({start:e,current:e,isUsingShift:o!=null?o:!1}),(l=t.interaction)==null||l.begin(n.document.selection.items)},move(e){var c;const o=h(t),n=o.board.findNearestNote(e.x,e.y),s=o.board.isPointInBoard(e.x,e.y);t.interaction?t.interaction.update(e):s?t.hoveredNode=(c=h(t).document.firstNodeAtCoord(n))!=null?c:null:t.hoveredNode=null},up(){var e,o;!((e=t.interaction)==null?void 0:e.hasMoved)&&!t.isUsingShift&&t.initialTarget&&h(t).document.selection.replace([t.initialTarget]),(o=t.interaction)==null||o.commit(),t.interaction=null,t.isUsingShift=!1,t.initialTarget=null,W().stopGroup()}})),$t=i.model("CreateTool",{type:M("CREATE_TOOL"),interaction:i.maybeNull(i.union(Ut)),hoveredPointer:i.maybeNull(Dt)}).actions(t=>({down(e,o){const n=h(t);W().startGroup(),n.board.isPointInBoard(e.x,e.y)&&(t.hoveredPointer=null,t.interaction=Ut.create({start:e,current:e}),t.interaction.begin())},move(e){const o=h(t),n=o.board.findNearestNote(e.x,e.y),s=o.board.isPointInBoard(e.x,e.y);t.interaction?t.interaction.update(e):s?t.hoveredPointer=Dt.create({props:{fret:n.fret,string:n.string}}):t.hoveredPointer=null},up(){var e;(e=t.interaction)==null||e.commit(),t.interaction=null,W().stopGroup()}}));function h(t){return q(t)}const no=i.model({isZooming:i.optional(i.boolean,!1),zoomState:i.optional(i.frozen(),()=>Ct),clientRect:i.optional(i.frozen(),()=>new DOMRectReadOnly)}).views(t=>({worldToViewport(e,o){return t.zoomState.apply([e,o])},viewportToWorld(e,o){return t.zoomState.invert([e,o])},screenToWorld(e,o){return this.viewportToWorld(e-t.clientRect.x,o-t.clientRect.y)},worldValueToViewportValue(e){return e*t.zoomState.k},worldRectToViewportRect(e){const[o,n]=this.worldToViewport(e.x,e.y),s=this.worldValueToViewportValue(e.width),c=this.worldValueToViewportValue(e.height);return new DOMRectReadOnly(o,n,s,c)},get viewportExtent(){const[e,o]=this.screenToWorld(t.clientRect.left,t.clientRect.top),[n,s]=this.screenToWorld(t.clientRect.right,t.clientRect.bottom);return new DOMRectReadOnly(e,o,n-e,s-o)}})).actions(t=>({setZoomState(e){t.zoomState=e},setClientRect(e){t.clientRect=e},setIsZooming(e){t.isZooming=e}})),ro=i.model().volatile(()=>({findNearestNote(t,e){throw new Error("Please call setFindNearestNote first")},extent:new DOMRectReadOnly,stringToY(t){throw new Error("Please call setStringToY first")},fretToX(t){throw new Error("Please call setStringToY first")}})).actions(t=>({setFindNearestNote(e){t.findNearestNote=e},setStringToY(e){t.stringToY=e},setFretToX(e){t.fretToX=e},setExtent(e){t.extent=e}})).views(t=>({isPointInBoard(e,o){return e>=t.extent.left&&e<=t.extent.right&&o>=t.extent.top&&o<=t.extent.bottom}})),io=i.model({document:i.optional(Je,{}),tool:i.optional(i.union(Vt,$t),{}),viewport:i.optional(no,{}),board:i.optional(ro,{})}).actions(t=>({setToolType(e){switch(e){case"POINTER_TOOL":t.tool=Vt.create();return;case"CREATE_TOOL":t.tool=$t.create();return}}})),{styled:v,createTheme:ao,globalCss:so,theme:{colors:D},config:$o}=fe({theme:{colors:f(f(f(f(f({},xe),ve),we),Te),Ee)},utils:{vStack:t=>({display:"flex",flexDirection:"column",alignItems:"center",gap:t}),hStack:t=>({display:"flex",flexDirection:"row",alignItems:"center",gap:t})}});ao({colors:f(f(f(f(f({},ke),Ce),Se),Re),Ie)});function co(t){return typeof t!="undefined"&&t!=null}const lo=["E4","B3","G3","D3","A2","E2"],uo=1400,Wt=24,Xt=m.exports.createContext({}),X=t=>{if(t<=0)return 0;const e=X(t-1);return(1-e)/17.817+e},Gt=()=>{const{minFret:t,maxFret:e,boardExtent:o,fretToX:n}=E(),s=nt(t,e+1);return r(T,{children:s.map(c=>r("line",{y1:o.top,y2:o.bottom,x1:n(c),x2:n(c),stroke:D.sand8.value,strokeWidth:c===0?5:3,strokeLinecap:"round"},`fret_${c}`))})},Yt=()=>{const{minFret:t,maxFret:e,fretToX:o,stringToY:n,numStrings:s,octaveMarkerFrets:c,secondaryMarkerFrets:a}=E(),l=p=>p>t&&p<=e,d=Math.min((n(1)-n(0))/2-2,4);return g(T,{children:[a.filter(l).map(p=>r("circle",{cx:(o(p)+o(p-1))/2,cy:n((s+1)/2),r:d,fill:D.sand5.value},`marker_${p}`)),c.filter(l).map(p=>g(St.Fragment,{children:[r("circle",{cx:(o(p)+o(p-1))/2,cy:(n(3)+n(2))/2,r:d,fill:D.sand5.value}),r("circle",{cx:(o(p)+o(p-1))/2,cy:(n(4)+n(5))/2,r:d,fill:D.sand5.value})]},`marker_${p}`))]})},Kt=()=>{const{minString:t,maxString:e,tuning:o,stringToY:n,boardExtent:s}=E(),c=nt(t,e+1);return r(T,{children:c.map(a=>{const l=o[a];return r("text",{x:s.left-12,y:n(a),dominantBaseline:"middle",textAnchor:"end",fontSize:10,fontFamily:"sans-serif",style:{fill:D.sand11.value},children:l.letter},`string_number_${a}`)})})},Ht=()=>{const{octaveMarkerFrets:t,secondaryMarkerFrets:e,fretIsVisible:o,fretToX:n,boardExtent:s}=E(),c=[...t,...e].filter(o);return r(T,{children:c.map(a=>r("text",{x:n(a),y:s.bottom+20,textAnchor:"middle",fontSize:12,fontFamily:"sans-serif",style:{fill:D.sand11.value},children:a},`string_number_${a}`))})},jt=()=>{const{minString:t,maxString:e,minFret:o,stringToY:n,boardExtent:s}=E(),c=nt(t,e+1);return r(T,{children:c.map(a=>r("line",{x1:o===0?s.left-2.5:s.left,x2:s.right,y1:n(a),y2:n(a),strokeLinecap:"round",strokeWidth:1.5+a/4,stroke:D.sand10.value},`string_${a}`))})},po=s=>{var c=s,{width:t,height:e,children:o}=c,n=ot(c,["width","height","children"]);const{totalWidth:a,totalHeight:l,showFretNumbers:d,showStringNames:p}=E();return g("svg",et(f({viewBox:`0 0 ${a} ${l}`,width:t!=null?t:a,height:e!=null?e:l},n),{children:[r(Gt,{}),r(Yt,{}),r(jt,{}),p&&r(Kt,{}),d&&r(Ht,{}),o]}))},qt=({showFretNumbers:t=!0,showStringNames:e=!1,minFret:o=0,maxFret:n=Wt,margin:s={top:16,right:16,left:e?32:16,bottom:t?32:16},tuning:c=lo,children:a})=>{const l=c.map(u=>L.get(u)),d=c.length,p=1,x=d,w=12,N=8,P=o===0?0:N,z=n===Wt?0:N,A=uo*(X(n)-X(o))+s.left+s.right+P+z,k=200,_={top:s.top,right:A-s.right,bottom:k-s.bottom,left:s.left},V=Rt().domain([X(o),X(n)]).range([_.left+P,_.right-z]),O=u=>V(X(u)),b=u=>u===o?O(u):Le(O(u-1),O(u))(.66),B=u=>u===o?O(u):(O(u-1)+O(u))/2,F=Rt().domain([1,d]).range([s.top+w,_.bottom-w]),pt=u=>{const U=L.get(u);return U.empty?[]:l.map((C,$)=>[U.height-C.height,$+1]).filter(([C])=>mt(C)).map(([C,$])=>({note:U,fret:C,string:$,isOpen:C===0,x:B(C),y:F($)}))},mt=u=>u>=o&&u<=n,ht=L.get(L.sortedNames(l.map(u=>L.transpose(u,rt.fromSemitones(o))))[0]),gt=L.get(L.sortedNames(l.map(u=>L.transpose(u,rt.fromSemitones(n))))[l.length-1]),bt=Ne.rangeOf("C chromatic")(ht.name,gt.name).filter(co).map(pt).flat(),ne=_e.from(bt,u=>u.x,u=>u.y),re=(u,U)=>bt[ne.find(u,U)],ie=({string:u,fret:U})=>{const C=u-1;if(C<0||C>=l.length)return null;{const $=l[C];return L.get(L.transpose($,rt.fromSemitones(U)))}},ae=[12,24],se=[3,5,7,9,15,17,19,21];return r(Xt.Provider,{value:{boardExtent:_,findNearestNote:re,fretIsVisible:mt,fretToX:O,placementToNote:ie,fretToFingerX:b,maxFret:n,maxNote:gt,maxString:x,minFret:o,minNote:ht,minString:p,numStrings:d,octaveMarkerFrets:ae,placeNote:pt,secondaryMarkerFrets:se,showFretNumbers:t,showStringNames:e,stringToY:F,totalHeight:k,totalWidth:A,tuning:l},children:a})},E=()=>m.exports.useContext(Xt),mo=t=>{const e=t.letter,o=t.alt===-1?"b":t.alt===1?"#":"";return`${e}${o}`},Zt=({fret:t,string:e,label:o,labelKind:n="manual",outline:s=!1,shape:c="square",color:a=D.sand11})=>{const{fretToFingerX:l,stringToY:d,placementToNote:p}=E(),x=l(t),w=d(e),N=s?11:12,P=s?{fill:"white",stroke:a,strokeWidth:2}:{fill:a},z=s?{fill:a}:{fill:"white"},A=p({fret:t,string:e}),k=n==="note-name"?A?mo(A):"":o;return g("g",{children:[c==="square"?r("rect",{width:N*2,height:N*2,x:x-N,y:w-N,rx:2,ry:2,style:P}):r("circle",{cx:x,cy:w,r:N,style:P}),k&&r("text",{x,y:w+1,dominantBaseline:"middle",textAnchor:"middle",fontSize:10,fontFamily:"sans-serif",fontWeight:"bold",style:z,children:k})]})},Qt=v("div"),ho=v("div",{height:"100%",width:"100%"}),go=v("svg",{outline:"none",userSelect:"none"}),bo=v("div",{width:"100%",height:"100%",touchAction:"none",display:"flex",alignItems:"center",justifyContent:"center",gridArea:"workspace",background:"#eee",overflow:"auto"});v("button",{background:"#eee",padding:"4px 8px",border:"none",borderRadius:4});const dt=v("button",{display:"flex",height:48,width:48,alignItems:"center",justifyContent:"center",background:"rgba(120,120,120,0.2)",color:"rgb(123,123,124)",border:"none",borderRadius:100,backdropFilter:"blur(4px)","&:hover:not(:disabled)":{background:"rgba(0,0,0,0.15)",color:"rgb(80,80,80)"},"&:disabled":{background:"rgba(0,0,0,0.05)",color:"rgb(180,180,180)"},variants:{isActive:{true:{color:"#009EE9ff",background:"rgba(255,255,255,.6)",boxShadow:"0px 0px 0px 2px #009EE9aa","&:hover:not(:disabled)":{color:"#009EE9ff",background:"rgba(255,255,255,.6)"}},false:{}}}}),yo=v("div",{hStack:8,position:"absolute",bottom:12,left:12,right:12,padding:8}),fo=v("div",{hStack:8,justifyContent:"center",position:"absolute",top:12,left:12,right:12,padding:8}),xo=v("div",{$$edgeButtonDirection:"row",vStack:8,alignItems:"flex-start",justifyContent:"center",position:"absolute",top:12,bottom:12,left:12,padding:8}),H=v("div",{width:8,height:8}),J=v("div",{$$edgeButtonDirection:"row-reverse",vStack:8,alignItems:"flex-end",justifyContent:"center",position:"absolute",top:12,bottom:12,right:12,padding:8});function Jt(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}const vo=()=>{const t=I();return r(po,{children:t.document.entities.map(e=>r(Zt,f({},e.props),e.id))})};function wo(t){const e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{const n=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+n)}catch(o){console.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(e)}function To(t){if(!navigator.clipboard){wo(t);return}navigator.clipboard.writeText(t).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)})}const Eo=()=>{const t=I();return m.exports.useCallback(()=>{const e=ze.exports.renderToString(r(ut.Provider,{value:t,children:r(qt,{minFret:t.document.boardConfig.minFret,maxFret:t.document.boardConfig.maxFret,showFretNumbers:t.document.boardConfig.showFretNumbers,children:r(vo,{})})}));To(e)},[t])};function te(){const t=m.exports.useRef(!1);return m.exports.useEffect(()=>{const e=n=>{n.key===" "&&(n.preventDefault(),t.current=!0)},o=n=>{n.key===" "&&(n.preventDefault(),t.current=!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",o),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",o)}}),t}function ko(t){const e=te(),o=m.exports.useRef(null),n=m.exports.useRef(null);m.exports.useEffect(()=>{const c=n.current;if(c){o.current=Ye().scaleExtent([.1,1e3]).filter(d=>d.type==="mousedown"?e.current:d.touches?d.touches.length>1:!0);const a=o.current,l=_t(c);return a.on("start",()=>{t.viewport.setIsZooming(!0)}),a.on("zoom",d=>{t.viewport.setZoomState(d.transform)}),a.on("end",()=>{t.viewport.setIsZooming(!1)}),a(l),l.on("dblclick.zoom",null),()=>{a.on("zoom",null),a.on("start",null),a.on("end",null)}}},[]);const s=m.exports.useCallback((c,a,l)=>{o.current&&n.current&&o.current.transform(_t(n.current),Ct.translate(c,a).scale(l))},[]);return[n,s]}const Co=S((s,n)=>{var c=s,{width:t,height:e}=c,o=ot(c,["width","height"]);const{showFretNumbers:a,showStringNames:l}=E(),d=I();return g(go,et(f({ref:n,viewBox:`0 0 ${t} ${e}`,width:t,height:e},o),{children:[g("g",{transform:d.viewport.zoomState.toString(),children:[r(Gt,{}),r(Yt,{}),r(jt,{}),l&&r(Kt,{}),a&&r(Ht,{}),r(_o,{})]}),r(Lo,{})]}))},{forwardRef:!0}),So=S(({node:t})=>{const{fretToFingerX:e,stringToY:o}=E(),n=I(),[s,c]=n.viewport.worldToViewport(e(t.props.fret),o(t.props.string)),a=n.viewport.worldValueToViewportValue(13);return r(T,{children:r("circle",{cx:s,cy:c,r:a,stroke:"#009EE9ff",strokeWidth:"1.5",fill:"none"})})}),Ro=S(({node:t})=>{const{fretToFingerX:e,stringToY:o}=E(),n=I(),[s,c]=n.viewport.worldToViewport(e(t.props.fret),o(t.props.string)),a=n.viewport.worldValueToViewportValue(10);return r("circle",{cx:s,cy:c,r:a,stroke:"#009EE9ff",strokeWidth:"2",fill:"none"})}),ut=m.exports.createContext(null),I=()=>{const t=m.exports.useContext(ut);if(!t)throw new Error("useRootStore must be used within a RootStoreProvider");return t},Io=S(({tool:t})=>{const e=I(),o=t.interaction,n=(o==null?void 0:o.type)==="MARQUEE_SELECT"?e.viewport.worldRectToViewportRect(o.rect):null;return g(T,{children:[t.hoveredNode&&r(Ro,{node:t.hoveredNode}),n&&r("rect",{x:n.x,y:n.y,width:n.width,height:n.height,stroke:"#009EE966",fill:"#009EE911"})]})}),No=S(({tool:t})=>{const{fretToFingerX:e,stringToY:o}=E(),n=I();if(t.hoveredPointer){const[s,c]=n.viewport.worldToViewport(e(t.hoveredPointer.props.fret),o(t.hoveredPointer.props.string)),a=n.viewport.worldValueToViewportValue(10);return r(T,{children:t.hoveredPointer&&r("circle",{cx:s,cy:c,r:a,fill:"black",opacity:.5})})}else return null}),_o=S(()=>{const t=I();return r(T,{children:t.document.entities.map(e=>r(Zt,f({},e.props),e.id))})}),Lo=S(()=>{const t=I();return g(T,{children:[t.document.selection.items.map(e=>r(So,{node:e},"selected_"+e.id)),t.tool.type==="POINTER_TOOL"&&r(Io,{tool:t.tool}),t.tool.type==="CREATE_TOOL"&&r(No,{tool:t.tool})]})}),Mo=v("button",{hStack:12,padding:0,border:0,background:"none",outline:"none",color:"rgb(60,60,60)",appearance:"none","-webkit-tap-highlight-color":"transparent",userSelect:"none",flexDirection:"$$edgeButtonDirection","&:hover":{background:"none"},"&:disabled":{color:"rgb(180,180,180)"}}),ee=v("div",{display:"flex",height:48,width:48,alignItems:"center",justifyContent:"center",background:"rgba(180,180,180,0.3)",color:"rgb(80,80,80)",border:"none",borderRadius:100,backdropFilter:"blur(4px)",boxShadow:"0 0 0 0 #009EE9aa",variants:{isSelected:{true:{color:"#009EE9ff",background:"rgba(255,255,255,.6)",boxShadow:"0 0 0 2px #009EE9aa","&:hover:not(:disabled)":{color:"#009EE9ff",background:"rgba(255,255,255,.6)"}},false:{}},isDisabled:{true:{background:"rgba(60,60,60,0.05)",color:"rgb(180,180,180)"},false:{}},isFilled:{true:{"& svg":{fill:"$$fillColor",stroke:"$$fillColor"}}}}}),oe=v("div",{fontSize:13,fontWeight:500}),Oo={initial:{x:-72},animate:{x:0,opacity:1,transition:{type:"spring",duration:.4,bounce:.2}},exit:{opacity:0,transition:{duration:.1,type:"tween"}}},Po={initial:{y:72},animate:{y:0,opacity:1,transition:{type:"spring",duration:.4,bounce:.2}},exit:{opacity:0,transition:{duration:.1,type:"tween"}}},Ao={initial:{y:-72},animate:{y:0,opacity:1,transition:{type:"spring",duration:.4,bounce:.2}},exit:{opacity:0,transition:{duration:.1,type:"tween"}}},tt={initial:{x:72},animate:{x:0,opacity:1,transition:{type:"spring",duration:.4,bounce:.2}},exit:{opacity:0,transition:{duration:.1,type:"tween"}}},y=({Icon:t,label:e,fillColor:o,isSelected:n=!1,isDisabled:s=!1,iconOnly:c=!1,onClick:a})=>r(Mo,{as:R.button,whileTap:s?void 0:{scale:.9},whileHover:s?void 0:{scale:1.1},disabled:s,onClick:a,css:{$$fillColor:o},children:c?g(T,{children:[r(ee,{isSelected:n,isFilled:!!o,isDisabled:s,children:r(t,{size:20})}),r(Ke,{children:r(oe,{children:e})})]}):g(T,{children:[r(ee,{isSelected:n,isDisabled:s,children:r(t,{size:20})}),r(oe,{children:e})]})}),Fo=S(()=>{const t=I(),e=t.document.selection.action;if(e)switch(e.type){case"SET_LABEL":return g(J,{as:R.div,variants:tt,initial:"initial",animate:"animate",exit:"exit",children:[r(y,{Icon:it,label:"Back",onClick:t.document.selection.clearAction},"back"),r(H,{}),r(y,{Icon:Me,label:"Automatic",onClick:()=>e.setKind("note-name")},"auto"),r(y,{Icon:Oe,label:"Clear",onClick:e.clearLabel},"clear")]},"set-label-buttons");case"SET_COLOR":return g(J,{as:R.div,variants:tt,initial:"initial",animate:"animate",exit:"exit",children:[r(y,{Icon:it,label:"Back",onClick:t.document.selection.clearAction},"back"),r(H,{}),r(y,{Icon:Y,iconOnly:!0,label:"Black",fillColor:"black",onClick:()=>e.setColor("black")},"black"),r(y,{Icon:Y,iconOnly:!0,label:"Blue",fillColor:"blue",onClick:()=>e.setColor("blue")},"blue"),r(y,{Icon:Y,iconOnly:!0,label:"Red",fillColor:"red",onClick:()=>e.setColor("red")},"red"),r(y,{Icon:Y,iconOnly:!0,label:"Green",fillColor:"green",onClick:()=>e.setColor("green")},"green")]},"set-label-buttons");case"SET_SHAPE":return g(J,{as:R.div,variants:tt,initial:"initial",animate:"animate",exit:"exit",children:[r(y,{Icon:it,label:"Back",onClick:t.document.selection.clearAction},"back"),r(H,{}),r(y,{Icon:Y,label:"Circle",onClick:()=>e.setShape("circle")},"black"),r(y,{Icon:It,label:"Square",onClick:()=>e.setShape("square")},"black")]},"set-label-buttons")}else return g(J,{as:R.div,variants:tt,initial:"initial",animate:"animate",exit:"exit",children:[r(y,{Icon:Pe,label:"Deselect",onClick:t.document.selection.clear},"deselect"),r(H,{}),r(y,{Icon:Ae,label:"Label",onClick:()=>t.document.selection.startAction("label")},"label"),r(y,{Icon:It,label:"Shape",onClick:()=>t.document.selection.startAction("shape")},"shape"),r(y,{Icon:Fe,label:"Color",onClick:()=>t.document.selection.startAction("color")},"color"),r(H,{}),r(y,{Icon:De,label:"Delete",onClick:t.document.deleteSelection},"delete")]},"selection-buttons")}),Do=S(()=>{var n;const t=Eo(),e=W(),o=I();return g(T,{children:[g(at,{children:[o.document.selection.hasItems&&r(Fo,{}),g(xo,{as:R.div,variants:Oo,initial:"initial",animate:"animate",exit:"exit",children:[r(y,{Icon:Be,label:"Select",onClick:()=>o.setToolType("POINTER_TOOL"),isSelected:o.tool.type==="POINTER_TOOL"}),r(y,{Icon:Ue,label:"Add",onClick:()=>o.setToolType("CREATE_TOOL"),isSelected:o.tool.type==="CREATE_TOOL"})]},"tool-select")]}),r(at,{children:((n=o.document.selection.action)==null?void 0:n.type)==="SET_LABEL"&&r(fo,{as:R.div,variants:Ao,initial:"initial",animate:"animate",exit:"exit",children:r(Qt,{as:"input",css:{border:"none",borderRadius:8,marginTop:24,boxShadow:"0px 0px 0px 0px #009EE9aa",transition:"box-shadow 0.2s ease-out",fontSize:28,padding:8,outline:"none",backdropFilter:"blur(4px)",background:"rgba(255,255,255,.8)",color:"rgb(80,80,80)","&:focus":{boxShadow:"0px 0px 0px 2px #009EE9aa"}},type:"text",value:o.document.selection.action.label,onChange:s=>o.document.selection.action.setLabel(s.currentTarget.value)})},"label-editor")}),r(at,{children:g(yo,{as:R.div,variants:Po,initial:"initial",animate:"animate",exit:"exit",children:[r(dt,{as:R.button,layout:!0,initial:{y:72},animate:{y:0,opacity:1},exit:{opacity:0},whileTap:{scale:.9},disabled:!e.canUndo,onClick:e.undo,children:r(Ve,{size:20})},"undo"),r(dt,{as:R.button,layout:!0,initial:{y:72},animate:{y:0,opacity:1},exit:{opacity:0},whileTap:{scale:.9},disabled:!e.canRedo,onClick:e.redo,children:r($e,{size:20})},"redo"),r(Qt,{css:{marginLeft:"auto",hStack:8},children:r(dt,{as:R.button,layout:!0,initial:{y:72},animate:{y:0,opacity:1},exit:{opacity:0},whileTap:{scale:.9},onClick:t,children:r(We,{size:20})},"copy")})]})})]})}),zo=S(({rootStore:t})=>{const e=te(),{findNearestNote:o,totalWidth:n,totalHeight:s,stringToY:c,fretToFingerX:a}=E(),[l,{x:d,y:p,width:x,height:w}]=Xe(),[N,P]=ko(t);m.exports.useEffect(()=>{if(x!==0&&w!==0){const b=1.5;P((x-n*b)/2,(w-s*b)/2,b)}},[x,w,P]),m.exports.useEffect(()=>{t.viewport.setClientRect(new DOMRectReadOnly(d,p,x,w))},[t,d,p,x,w]),m.exports.useEffect(()=>{t.board.setFindNearestNote(o)},[t,o]),m.exports.useEffect(()=>{t.board.setStringToY(c)},[t,c]),m.exports.useEffect(()=>{t.board.setFretToX(a)},[t,a]),m.exports.useEffect(()=>{t.board.setExtent(new DOMRectReadOnly(0,0,n,s))},[t,s,n]);const z=m.exports.useCallback(b=>{if(b.preventDefault(),e.current)return;const[B,F]=t.viewport.viewportToWorld(...Nt(b));t.tool.down({x:B,y:F},b.shiftKey)},[t.tool,t.viewport.zoomState]),A=m.exports.useCallback(b=>{b.preventDefault(),console.log("touchstart");const[B,F]=t.viewport.viewportToWorld(...Ge(b)[0]);t.tool.down({x:B,y:F},b.shiftKey)},[t.tool,t.viewport.zoomState]),k=m.exports.useCallback(b=>{const[B,F]=t.viewport.screenToWorld(...Nt(b));t.tool.move({x:B,y:F})},[t.tool,t.viewport.zoomState]),_=m.exports.useCallback(b=>{t.tool.up()},[t.tool]);m.exports.useEffect(()=>Jt()?(window.addEventListener("touchmove",k),window.addEventListener("touchend",_),()=>{window.removeEventListener("touchmove",k),window.removeEventListener("touchend",_)}):(window.addEventListener("mousemove",k),window.addEventListener("mouseup",_),()=>{window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",_)}),[k,_]);const V=W();Z("cmd+z",()=>{V.canUndo&&V.undo()}),Z("cmd+a",b=>{b.preventDefault(),t.document.selectAll()}),Z("cmd+shift+z",()=>{V.canRedo&&V.redo()}),Z("backspace",()=>{t.document.selection.hasItems&&t.document.deleteEntities(t.document.selection.items)});const O=m.exports.useMemo(()=>Jt()?{onTouchStart:A}:{onMouseDown:z},[A,z]);return r(ut.Provider,{value:t,children:g(ho,{children:[r(bo,{ref:l,children:r(Co,f({tabIndex:0,ref:N,width:x,height:w},O))}),r(Do,{})]})})}),Bo=S(()=>{const t=m.exports.useMemo(()=>{const e=io.create({});return oo(e.document),He(e),e},[]);return r(qt,{minFret:t.document.boardConfig.minFret,maxFret:t.document.boardConfig.maxFret,showFretNumbers:t.document.boardConfig.showFretNumbers,children:r(zo,{rootStore:t})})});so({"html, body, #root":{width:"100%",height:"100%",margin:0,padding:0,fontFamily:"system-ui",overflow:"hidden",position:"fixed"}})();je.render(r(St.StrictMode,{children:r(Bo,{})}),document.getElementById("root"));
